<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>In the beginning was the word ...</title>
  <meta name="description" content="An Introduction to Text Analysis with R">
  <meta name="generator" content="bookdown 0.4 and GitBook 2.6.7">

  <meta property="og:title" content="In the beginning was the word ..." />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://m-clark.github.io/Workshops/text_analysis/" />
  <meta property="og:image" content="https://m-clark.github.io/Workshops/text_analysis/img/nineteeneightyR.png" />
  <meta property="og:description" content="An Introduction to Text Analysis with R" />
  <meta name="github-repo" content="m-clark/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="In the beginning was the word ..." />
  
  <meta name="twitter:description" content="An Introduction to Text Analysis with R" />
  <meta name="twitter:image" content="https://m-clark.github.io/Workshops/text_analysis/img/nineteeneightyR.png" />



<meta name="date" content="2017-07-25">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="summary.html">
<link rel="next" href="appendix.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.9/htmlwidgets.js"></script>
<script src="libs/datatables-binding-0.2/datatables.js"></script>
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.12/js/jquery.dataTables.min.js"></script>
<script src="libs/plotly-binding-4.7.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotlyjs-1.27.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotlyjs-1.27.1/plotly-latest.min.js"></script>
<script src="libs/d3-3.5.3/./d3.min.js"></script>
<link href="libs/d3heatmapcore-0.0.0/heatmapcore.css" rel="stylesheet" />
<script src="libs/d3heatmapcore-0.0.0/heatmapcore.js"></script>
<script src="libs/d3-tip-0.6.6/index.js"></script>
<script src="libs/d3heatmap-binding-0.6.1.1/d3heatmap.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css\standard_html.css" type="text/css" />
<link rel="stylesheet" href="css\book.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://m-clark.github.io/workshops/"><span style="font-size:125%; font-variant:small-caps; font-style:italic; color:#9E1B34; font-family:Roboto">Text Analysis in R</span></a></li>

<li class="divider"></li>
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#overview"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#goals"><i class="fa fa-check"></i>Goals</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#initial-steps"><i class="fa fa-check"></i>Initial Steps</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html"><i class="fa fa-check"></i>String Theory</a><ul>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#basic-data-types"><i class="fa fa-check"></i>Basic data types</a><ul>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#character-strings"><i class="fa fa-check"></i>Character strings</a></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#factors"><i class="fa fa-check"></i>Factors</a></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#analysis"><i class="fa fa-check"></i>Analysis</a></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#characters-vs.factors"><i class="fa fa-check"></i>Characters vs. Factors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#basic-text-functionality"><i class="fa fa-check"></i>Basic Text Functionality</a><ul>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#base-r"><i class="fa fa-check"></i>Base R</a></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#packages"><i class="fa fa-check"></i>Packages</a></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#other"><i class="fa fa-check"></i>Other</a></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#summary-of-basic-text-functionality"><i class="fa fa-check"></i>Summary of basic text functionality</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#regular-expressions"><i class="fa fa-check"></i>Regular Expressions</a><ul>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#typical-uses"><i class="fa fa-check"></i>Typical Uses</a></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#dplyr-helper-functions"><i class="fa fa-check"></i>dplyr helper functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#examples"><i class="fa fa-check"></i>Examples</a><ul>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#example-1"><i class="fa fa-check"></i>Example 1</a></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#example-2"><i class="fa fa-check"></i>Example 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="string-theory.html"><a href="string-theory.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sentiment-analysis-is-sick-yo.html"><a href="sentiment-analysis-is-sick-yo.html"><i class="fa fa-check"></i>Sentiment Analysis is Sick Yo</a><ul>
<li class="chapter" data-level="" data-path="sentiment-analysis-is-sick-yo.html"><a href="sentiment-analysis-is-sick-yo.html#basic-idea"><i class="fa fa-check"></i>Basic idea</a></li>
<li class="chapter" data-level="" data-path="sentiment-analysis-is-sick-yo.html"><a href="sentiment-analysis-is-sick-yo.html#issues"><i class="fa fa-check"></i>Issues</a><ul>
<li class="chapter" data-level="" data-path="sentiment-analysis-is-sick-yo.html"><a href="sentiment-analysis-is-sick-yo.html#context-sarcasm-etc."><i class="fa fa-check"></i>Context, sarcasm, etc.</a></li>
<li class="chapter" data-level="" data-path="sentiment-analysis-is-sick-yo.html"><a href="sentiment-analysis-is-sick-yo.html#lexicons"><i class="fa fa-check"></i>Lexicons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sentiment-analysis-is-sick-yo.html"><a href="sentiment-analysis-is-sick-yo.html#sentiment-analysis-example"><i class="fa fa-check"></i>Sentiment Analysis Example</a><ul>
<li class="chapter" data-level="" data-path="sentiment-analysis-is-sick-yo.html"><a href="sentiment-analysis-is-sick-yo.html#the-first-thing-the-baby-did-wrong"><i class="fa fa-check"></i>The first thing the baby did wrong</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sentiment-analysis-is-sick-yo.html"><a href="sentiment-analysis-is-sick-yo.html#sentiment-analysis-exercise"><i class="fa fa-check"></i>Sentiment Analysis Exercise</a><ul>
<li class="chapter" data-level="" data-path="sentiment-analysis-is-sick-yo.html"><a href="sentiment-analysis-is-sick-yo.html#romeo-juliet"><i class="fa fa-check"></i>Romeo &amp; Juliet</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sentiment-analysis-is-sick-yo.html"><a href="sentiment-analysis-is-sick-yo.html#sentiment-analysis-summary"><i class="fa fa-check"></i>Sentiment Analysis Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="pos-taggin.html"><a href="pos-taggin.html"><i class="fa fa-check"></i>POS taggin’</a><ul>
<li class="chapter" data-level="" data-path="pos-taggin.html"><a href="pos-taggin.html#basic-idea-1"><i class="fa fa-check"></i>Basic idea</a></li>
<li class="chapter" data-level="" data-path="pos-taggin.html"><a href="pos-taggin.html#pos-examples"><i class="fa fa-check"></i>POS Examples</a><ul>
<li class="chapter" data-level="" data-path="pos-taggin.html"><a href="pos-taggin.html#barthelme-carver"><i class="fa fa-check"></i>Barthelme &amp; Carver</a></li>
<li class="chapter" data-level="" data-path="pos-taggin.html"><a href="pos-taggin.html#more-taggin"><i class="fa fa-check"></i>More taggin’</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="pos-taggin.html"><a href="pos-taggin.html#pos-exercise"><i class="fa fa-check"></i>POS Exercise</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="topic-modeling.html"><a href="topic-modeling.html"><i class="fa fa-check"></i>Topic modeling</a><ul>
<li class="chapter" data-level="" data-path="topic-modeling.html"><a href="topic-modeling.html#basic-idea-2"><i class="fa fa-check"></i>Basic idea</a></li>
<li class="chapter" data-level="" data-path="topic-modeling.html"><a href="topic-modeling.html#steps"><i class="fa fa-check"></i>Steps</a></li>
<li class="chapter" data-level="" data-path="topic-modeling.html"><a href="topic-modeling.html#topic-model-example"><i class="fa fa-check"></i>Topic Model Example</a><ul>
<li class="chapter" data-level="" data-path="topic-modeling.html"><a href="topic-modeling.html#shakespeare"><i class="fa fa-check"></i>Shakespeare</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="topic-modeling.html"><a href="topic-modeling.html#extensions"><i class="fa fa-check"></i>Extensions</a></li>
<li class="chapter" data-level="" data-path="topic-modeling.html"><a href="topic-modeling.html#exercise"><i class="fa fa-check"></i>Exercise</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html"><i class="fa fa-check"></i>Shakespeare Start to Finish</a><ul>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#act-i.-scrape-moby-and-gutenberg-shakespeare"><i class="fa fa-check"></i>ACT I. Scrape Moby and Gutenberg Shakespeare</a><ul>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-i.-scrape-main-works"><i class="fa fa-check"></i>Scene I. Scrape main works</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-ii.-sonnets"><i class="fa fa-check"></i>Scene II. Sonnets</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-iii.-save-and-write-out"><i class="fa fa-check"></i>Scene III. Save and write out</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-iv.-read-text-from-files"><i class="fa fa-check"></i>Scene IV. Read text from files</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-v.-add-additional-works"><i class="fa fa-check"></i>Scene V. Add additional works</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#act-ii.-preliminary-cleaning"><i class="fa fa-check"></i>ACT II. Preliminary Cleaning</a><ul>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-i.-remove-initial-textmetadata"><i class="fa fa-check"></i>Scene I. Remove initial text/metadata</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-ii.-miscellaneous-removal"><i class="fa fa-check"></i>Scene II. Miscellaneous removal</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-iii.-classification-of-works"><i class="fa fa-check"></i>Scene III. Classification of works</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#act-iii.-stop-words"><i class="fa fa-check"></i>ACT III. Stop words</a><ul>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-i.-character-names"><i class="fa fa-check"></i>Scene I. Character names</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-ii.-old-middle-modern-english"><i class="fa fa-check"></i>Scene II. Old, Middle, &amp; Modern English</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-iii.-remove-stopwords"><i class="fa fa-check"></i>Scene III. Remove stopwords</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#act-iv.-other-fixes"><i class="fa fa-check"></i>ACT IV. Other fixes</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#act-v.-fun-stuff"><i class="fa fa-check"></i>ACT V. Fun stuff</a><ul>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-i.-count-the-terms"><i class="fa fa-check"></i>Scene I. Count the terms</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-ii.-stemming"><i class="fa fa-check"></i>Scene II. Stemming</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-iii.-exploration"><i class="fa fa-check"></i>Scene III. Exploration</a></li>
<li class="chapter" data-level="" data-path="shakespeare-start-to-finish.html"><a href="shakespeare-start-to-finish.html#scene-iv.-topic-model"><i class="fa fa-check"></i>Scene IV. Topic model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a><ul>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#texts"><i class="fa fa-check"></i>Texts</a><ul>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#donald-barthelme"><i class="fa fa-check"></i>Donald Barthelme</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#raymond-carver"><i class="fa fa-check"></i>Raymond Carver</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#billy-dee-shakespeare"><i class="fa fa-check"></i>Billy Dee Shakespeare</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#python"><i class="fa fa-check"></i>Python</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://m-clark.github.io" target="blank" style="font-size:150%; font-variant:small-caps; color:#9E1B34; font-family:Roboto">Michael Clark</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><span style="font-size:125%; font-family:Stalemate">In the beginning was the word ...</span></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="shakespeare-start-to-finish" class="section level1">
<h1>Shakespeare Start to Finish</h1>
<p>The following attempts to demonstrate the usual difficulties one encounters dealing with text by procuring and processing the works of Shakespeare. The source is <a href="http://shakespeare.mit.edu/">MIT</a> which has made the ‘complete’ works available on the web since 1993, plus one other from Gutenberg. The initial issue is simply getting the works from the web. Subsequently there is metadata, character names, stopwords etc. to be removed. At that point we can stem and count the words in each work, which, when complete, puts us at the point we are ready for analysis.</p>
<p>The primary packages used are <span class="pack">tidytext</span>, <span class="pack">stringr</span>, and when things are ready for analysis, <span class="pack">quanteda.</span></p>
<div id="act-i.-scrape-moby-and-gutenberg-shakespeare" class="section level2">
<h2>ACT I. Scrape Moby and Gutenberg Shakespeare</h2>
<div id="scene-i.-scrape-main-works" class="section level3">
<h3>Scene I. Scrape main works</h3>
<p>Initially we must scrape the web to get the documents we need. The <span class="pack">rvest</span> package will be used as follows.</p>
<ul>
<li>Start with the url of the site</li>
<li>Get the links off that page to serve as base urls for the works</li>
<li>Scrape the document for each url</li>
<li>Deal with the collection of Sonnets separately</li>
<li>Write out results</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rvest); <span class="kw">library</span>(tidyverse); <span class="kw">library</span>(stringr)

page0 =<span class="st"> </span><span class="kw">read_html</span>(<span class="st">&#39;http://shakespeare.mit.edu/&#39;</span>)

works_urls0 =<span class="st"> </span>page0 %&gt;%
<span class="st">  </span><span class="kw">html_nodes</span>(<span class="st">&#39;a&#39;</span>) %&gt;%
<span class="st">  </span><span class="kw">html_attr</span>(<span class="st">&#39;href&#39;</span>)

main =<span class="st"> </span>works_urls0 %&gt;%
<span class="st">  </span><span class="kw">grep</span>(<span class="dt">pattern=</span><span class="st">&#39;index&#39;</span>, <span class="dt">value=</span>T) %&gt;%
<span class="st">  </span><span class="kw">str_replace_all</span>(<span class="dt">pattern=</span><span class="st">&#39;index&#39;</span>, <span class="dt">replacement=</span><span class="st">&#39;full&#39;</span>)

other =<span class="st"> </span>works_urls0[!<span class="kw">grepl</span>(works_urls0, <span class="dt">pattern=</span><span class="st">&#39;index|edu|org|news&#39;</span>)]

works_urls =<span class="st"> </span><span class="kw">c</span>(main, other)
works_urls[<span class="dv">1</span>:<span class="dv">3</span>]</code></pre></div>
<p>Now we just paste the main site url to the work urls and download them. Here is where we come across our first snag. The <span class="func">html_text</span> function has what I would call a bug but what the author feels is a feature. <a href="https://github.com/hadley/rvest/issues/175">Basically it ignores line breaks of the form <br> in certain situations</a>. This means it will smash text together that shouldn’t be, thereby making <em>any</em> analysis of it fairly useless<a href="#fn8" class="footnoteRef" id="fnref8"><sup>8</sup></a>. Luckily, <a href="https://github.com/rentrop">@rentrop</a> provided a solution, which is in <code>r/fix_read_html.R</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">works0 =<span class="st"> </span><span class="kw">lapply</span>(works_urls, function(x) <span class="kw">read_html</span>(<span class="kw">paste0</span>(<span class="st">&#39;http://shakespeare.mit.edu/&#39;</span>, x)))

<span class="kw">source</span>(<span class="st">&#39;r/fix_read_html.R&#39;</span>)

<span class="kw">html_text_collapse</span>(works0[[<span class="dv">1</span>]]) <span class="co">#works</span>
works =<span class="st"> </span><span class="kw">lapply</span>(works0, html_text_collapse)


<span class="kw">names</span>(works) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;All&#39;s Well That Ends Well&quot;</span> <span class="st">&quot;As You Like It&quot;</span> <span class="st">&quot;Comedy of Errors&quot;</span>
                 <span class="st">&quot;Cymbeline&quot;</span> <span class="st">&quot;Love&#39;s Labour&#39;s Lost&quot;</span> <span class="st">&quot;Measure for Measure&quot;</span>
                 <span class="st">&quot;The Merry Wives of Windsor&quot;</span> <span class="st">&quot;The Merchant of Venice&quot;</span> <span class="st">&quot;A Midsummer Night&#39;s Dream&quot;</span>
                 <span class="st">&quot;Much Ado about Nothing&quot;</span> <span class="st">&quot;Pericles Prince of Tyre&quot;</span> <span class="st">&quot;The Taming of the Shrew&quot;</span>
                 <span class="st">&quot;The Tempest&quot;</span> <span class="st">&quot;Troilus and Cressida&quot;</span> <span class="st">&quot;Twelfth Night&quot;</span>
                 <span class="st">&quot;The Two Gentlemen of Verona&quot;</span> <span class="st">&quot;The Winter&#39;s Tale&quot;</span> <span class="st">&quot;King Henry IV Part 1&quot;</span>
                 <span class="st">&quot;King Henry IV Part 2&quot;</span> <span class="st">&quot;Henry V&quot;</span> <span class="st">&quot;Henry VI Part 1&quot;</span>
                 <span class="st">&quot;Henry VI Part 2&quot;</span> <span class="st">&quot;Henry VI Part 3&quot;</span> <span class="st">&quot;Henry VIII&quot;</span>
                 <span class="st">&quot;King John&quot;</span> <span class="st">&quot;Richard II&quot;</span> <span class="st">&quot;Richard III&quot;</span>
                 <span class="st">&quot;Antony and Cleopatra&quot;</span> <span class="st">&quot;Coriolanus&quot;</span> <span class="st">&quot;Hamlet&quot;</span>
                 <span class="st">&quot;Julius Caesar&quot;</span> <span class="st">&quot;King Lear&quot;</span> <span class="st">&quot;Macbeth&quot;</span>
                 <span class="st">&quot;Othello&quot;</span> <span class="st">&quot;Romeo and Juliet&quot;</span> <span class="st">&quot;Timon of Athens&quot;</span>
                 <span class="st">&quot;Titus Andronicus&quot;</span> <span class="st">&quot;Sonnets&quot;</span> <span class="st">&quot;A Lover&#39;s Complaint&quot;</span>
                 <span class="st">&quot;The Rape of Lucrece&quot;</span> <span class="st">&quot;Venus and Adonis&quot;</span> <span class="st">&quot;Elegy&quot;</span>)</code></pre></div>
</div>
<div id="scene-ii.-sonnets" class="section level3">
<h3>Scene II. Sonnets</h3>
<p>We hit a slight nuisance with the Sonnets. The Sonnets have a bit of a different structure than the plays. All links are in a single page, with a different form for the url, and each sonnet has its own page.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sonnet_urls =<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;http://shakespeare.mit.edu/&#39;</span>, <span class="kw">grep</span>(works_urls0, <span class="dt">pattern=</span><span class="st">&#39;sonnet&#39;</span>, <span class="dt">value=</span>T)) %&gt;%
<span class="st">  </span><span class="kw">read_html</span>() %&gt;%
<span class="st">  </span><span class="kw">html_nodes</span>(<span class="st">&#39;a&#39;</span>) %&gt;%
<span class="st">  </span><span class="kw">html_attr</span>(<span class="st">&#39;href&#39;</span>)

sonnet_urls =<span class="st"> </span><span class="kw">grep</span>(sonnet_urls, <span class="dt">pattern =</span> <span class="st">&#39;sonnet&#39;</span>, <span class="dt">value=</span>T)  <span class="co"># remove amazon link</span>

<span class="co"># read the texts</span>
sonnet0 =<span class="st"> </span>purrr::<span class="kw">map</span>(sonnet_urls, function(x) <span class="kw">read_html</span>(<span class="kw">paste0</span>(<span class="st">&#39;http://shakespeare.mit.edu/Poetry/&#39;</span>, x)))

<span class="co"># collapse to one &#39;Sonnets&#39; work</span>
sonnet =<span class="st"> </span><span class="kw">sapply</span>(sonnet0, html_text_collapse)
works$Sonnets =<span class="st"> </span>sonnet</code></pre></div>
</div>
<div id="scene-iii.-save-and-write-out" class="section level3">
<h3>Scene III. Save and write out</h3>
<p>Now we can save our results so we won’t have to repeat any of the previous scraping. We want to save the main text object as an RData file, and write out the texts to their own file. When dealing with text, you’ll regularly want to save stages so you can avoid repeating what you don’t have to, as often you will need to go back after discovering new issues further down the line.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">save</span>(works, <span class="dt">file=</span><span class="st">&#39;data/texts_raw/shakes/moby_from_web.RData&#39;</span>)

<span class="co"># This will spit the text to the console unfortunately</span>

purrr::<span class="kw">map2</span>(works,
            <span class="kw">paste0</span>(<span class="st">&#39;data/texts_raw/shakes/moby/&#39;</span>, <span class="kw">str_replace_all</span>(<span class="kw">names</span>(works), <span class="st">&quot; |&#39;&quot;</span>, <span class="st">&#39;_&#39;</span>), <span class="st">&#39;.txt&#39;</span>),
            function(x, nam) <span class="kw">write_lines</span>(x, <span class="dt">path=</span>nam))</code></pre></div>
</div>
<div id="scene-iv.-read-text-from-files" class="section level3">
<h3>Scene IV. Read text from files</h3>
<p>After the above is done, it’s not required to redo, so we can always get what we need. I’ll start with the raw text as files, as that is one of the more common ways one deals with documents. When text is nice and clean, this can be fairly straightforward.</p>
<p>The function at the end comes from the <span class="pack">tidyr</span> package. Up to that line, each element in the <span class="objclass">text</span> column is the entire text, while the column itself is thus a ‘list-column’. In other words we have a 42 x 2 matrix. But to do what we need, we’ll want to have access to each line, and the <span class="func">unnest</span> function unpacks each line within the title. The first few lines of the result is shown after.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse); <span class="kw">library</span>(stringr)

shakes0 =
<span class="st">  </span><span class="kw">data_frame</span>(<span class="dt">file =</span> <span class="kw">dir</span>(<span class="st">&#39;data/texts_raw/shakes/moby/&#39;</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)) %&gt;%
<span class="st">  </span><span class="kw">transmute</span>(<span class="dt">id =</span> <span class="kw">basename</span>(file), text) %&gt;%
<span class="st">  </span><span class="kw">unnest</span>(text)

<span class="kw">save</span>(shakes0, <span class="dt">file=</span><span class="st">&#39;data/initial_shakes_dt.RData&#39;</span>)

<span class="co"># Alternate that provides for more options</span>
<span class="co"># library(readtext)</span>
<span class="co"># shakes0 =</span>
<span class="co">#   data_frame(file = dir(&#39;data/texts_raw/shakes/moby/&#39;, full.names = TRUE)) %&gt;%</span>
<span class="co">#   mutate(text = map(file, readtext, encoding=&#39;UTF8&#39;)) %&gt;%</span>
<span class="co">#   unnest(text)</span></code></pre></div>
<div id="htmlwidget-844c8e8addea77cdde3d" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-844c8e8addea77cdde3d">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],["A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt","A_Lover_s_Complaint.txt"],["","A Lover's Complaint","","","","","A Lover's Complaint","","","","","FROM off a hill whose concave womb reworded","","A plaintful story from a sistering vale,","","My spirits to attend this double voice accorded,","","And down I laid to list the sad-tuned tale;","","Ere long espied a fickle maid full pale,"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>text<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"tp","order":[],"autoWidth":false,"orderClasses":false,"columnDefs":[{"orderable":false,"targets":0}],"rowCallback":"function(row, data) {\nvar value=data[0]; if (value!==null) $(row).css({'background-color':'transparent'});\n}"},"selection":{"mode":"multiple","selected":null,"target":"row"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
<div id="scene-v.-add-additional-works" class="section level3">
<h3>Scene V. Add additional works</h3>
<p>It is typical to be gathering texts from multiple sources. In this case, we’ll get <em>The Phoenix and the Turtle</em> from the Project Gutenberg website. There is an R package that will allow us to work directly with the site, making the process straightforward<a href="#fn9" class="footnoteRef" id="fnref9"><sup>9</sup></a>. I also considered two other works, but I refrained from “The Two Noble Kinsmen” because like many other of Shakespeare’s versions on Gutenberg, it’s basically written in a different language. I also refrained from <em>The Passionate Pilgrim</em> because it’s mostly not Shakespeare.</p>
<p>When first doing this project, I actually started with Gutenberg, but it became a notable PITA. The texts were inconsistent in source, and sometimes reproduced printing errors purposely, which would have compounded typical problems. I thought it could have been solved by using the <em>Complete Works of Shakespeare</em> but the download only came with that title, meaning one would have to hunt for and delineate each separate work. This might not have been too big of an issue, except that there is no table of contents, nor consistent naming of titles across different printings. The MIT approach, on the other hand, was a few lines of code. This represents a common issue in text analysis when dealing with sources, a different option may save a lot of time in the end.</p>
<p>The following code could be more succinct to deal with one text, but I initially was dealing with multiple works, so I’ve left it in that mode. In the end we’ll have a <span class="objclass">tibble</span> with an id column for the file/work name, and another column that contains the lines of text.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gutenbergr)

works_not_included =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;The Phoenix and the Turtle&quot;</span>)   <span class="co"># add others if desired</span>

gute0 =<span class="st"> </span><span class="kw">gutenberg_works</span>(title %in%<span class="st"> </span>works_not_included)
gute =<span class="st"> </span><span class="kw">lapply</span>(gute0$gutenberg_id, gutenberg_download)
gute =<span class="st"> </span><span class="kw">mapply</span>(function(x, y) <span class="kw">mutate</span>(x, <span class="dt">id=</span>y) %&gt;%<span class="st"> </span><span class="kw">select</span>(-gutenberg_id), 
              gute, works_not_included, 
              <span class="dt">SIMPLIFY=</span>F)

shakes =<span class="st"> </span>shakes0 %&gt;%
<span class="st">  </span><span class="kw">bind_rows</span>(gute) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">id =</span> <span class="kw">str_replace_all</span>(id, <span class="st">&quot; |&#39;&quot;</span>, <span class="st">&#39;_&#39;</span>)) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">id =</span> <span class="kw">str_replace</span>(id, <span class="st">&#39;.txt&#39;</span>, <span class="st">&#39;&#39;</span>)) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(id)

<span class="co"># shakes %&gt;% split(.$id) # inspect</span>

<span class="kw">save</span>(shakes, <span class="dt">file=</span><span class="st">&#39;data/texts_raw/shakes/shakes_df.RData&#39;</span>)</code></pre></div>
</div>
</div>
<div id="act-ii.-preliminary-cleaning" class="section level2">
<h2>ACT II. Preliminary Cleaning</h2>
<p>If you think we’re even remotely getting close to being ready for analysis, I say Ha! to you. Our journey has only just begun (cue the Carpenters).</p>
<p>Now we can start thinking about prepping the data for eventual analysis. One of the nice things about having the data in a tidy format is that we can use string functionality over the column of text in a simple fashion.</p>
<div id="scene-i.-remove-initial-textmetadata" class="section level3">
<h3>Scene I. Remove initial text/metadata</h3>
<p>First on our to-do list is to get rid of all the preliminary text of titles, authorship etc. This is fairly easy when you think that every text will start with ACT I, or in the case of the Sonnets, the word ‘Sonnet’. We want to drop all text up to those points. I’ve created a <a href="https://github.com/m-clark/text-analysis-with-R/blob/master/r/detect_first_act.R">function</a> that will do that, and then just apply it to each works tibble<a href="#fn10" class="footnoteRef" id="fnref10"><sup>10</sup></a>. For the poems and <em>A Funeral Elegy for Master William Peter</em>, we look instead for the line where his name or initials start the line.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="st">&#39;r/detect_first_act.R&#39;</span>)

shakes_trim =<span class="st"> </span>shakes %&gt;%
<span class="st">  </span><span class="kw">split</span>(.$id) %&gt;%
<span class="st">  </span><span class="kw">lapply</span>(detect_first_act) %&gt;%
<span class="st">  </span>bind_rows

shakes %&gt;%<span class="st"> </span><span class="kw">filter</span>(id==<span class="st">&#39;Romeo_and_Juliet&#39;</span>) %&gt;%<span class="st"> </span>head</code></pre></div>
<pre><code># A tibble: 6 x 2
                id                          text
             &lt;chr&gt;                         &lt;chr&gt;
1 Romeo_and_Juliet Romeo and Juliet: Entire Play
2 Romeo_and_Juliet                              
3 Romeo_and_Juliet                              
4 Romeo_and_Juliet                              
5 Romeo_and_Juliet                              
6 Romeo_and_Juliet              Romeo and Juliet</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shakes_trim %&gt;%<span class="st"> </span><span class="kw">filter</span>(id==<span class="st">&#39;Romeo_and_Juliet&#39;</span>) %&gt;%<span class="st"> </span>head</code></pre></div>
<pre><code># A tibble: 6 x 2
                id     text
             &lt;chr&gt;    &lt;chr&gt;
1 Romeo_and_Juliet         
2 Romeo_and_Juliet         
3 Romeo_and_Juliet PROLOGUE
4 Romeo_and_Juliet         
5 Romeo_and_Juliet         
6 Romeo_and_Juliet         </code></pre>
</div>
<div id="scene-ii.-miscellaneous-removal" class="section level3">
<h3>Scene II. Miscellaneous removal</h3>
<p>Next, we’ll want to remove empty rows, any remaining titles, lines that denote the act or scene, and other stuff. I’m going to remove the word <em>prologue</em> and <em>epilogue</em> as a stopword later. While some texts have a line that just says that (<code>PROLOGUE</code>), others have text that describes the scene (<code>Prologue. Blah blah</code>) and which I’ve decided to keep. As such, we just need the word itself gone.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">titles =<span class="st">  </span><span class="kw">c</span>(<span class="st">&quot;A Lover&#39;s Complaint&quot;</span>, <span class="st">&quot;All&#39;s Well That Ends Well&quot;</span>, <span class="st">&quot;As You Like It&quot;</span>, <span class="st">&quot;The Comedy of Errors&quot;</span>,
            <span class="st">&quot;Cymbeline&quot;</span>, <span class="st">&quot;Love&#39;s Labour&#39;s Lost&quot;</span>, <span class="st">&quot;Measure for Measure&quot;</span>,
            <span class="st">&quot;The Merry Wives of Windsor&quot;</span>, <span class="st">&quot;The Merchant of Venice&quot;</span>, <span class="st">&quot;A Midsummer Night&#39;s Dream&quot;</span>,
            <span class="st">&quot;Much Ado about Nothing&quot;</span>, <span class="st">&quot;Pericles Prince of Tyre&quot;</span>, <span class="st">&quot;The Taming of the Shrew&quot;</span>,
            <span class="st">&quot;The Tempest&quot;</span>, <span class="st">&quot;Troilus and Cressida&quot;</span>, <span class="st">&quot;Twelfth Night&quot;</span>,
            <span class="st">&quot;The Two Gentlemen of Verona&quot;</span>, <span class="st">&quot;The Winter&#39;s Tale&quot;</span>, <span class="st">&quot;King Henry IV, Part 1&quot;</span>,
            <span class="st">&quot;King Henry IV, Part 2&quot;</span>, <span class="st">&quot;Henry V&quot;</span>, <span class="st">&quot;Henry VI, Part 1&quot;</span>,
            <span class="st">&quot;Henry VI, Part 2&quot;</span>, <span class="st">&quot;Henry VI, Part 3&quot;</span>, <span class="st">&quot;Henry VIII&quot;</span>,
            <span class="st">&quot;King John&quot;</span>, <span class="st">&quot;Richard II&quot;</span>, <span class="st">&quot;Richard III&quot;</span>,
            <span class="st">&quot;Antony and Cleopatra&quot;</span>, <span class="st">&quot;Coriolanus&quot;</span>, <span class="st">&quot;Hamlet&quot;</span>,
            <span class="st">&quot;Julius Caesar&quot;</span>, <span class="st">&quot;King Lear&quot;</span>, <span class="st">&quot;Macbeth&quot;</span>,
            <span class="st">&quot;Othello&quot;</span>, <span class="st">&quot;Romeo and Juliet&quot;</span>, <span class="st">&quot;Timon of Athens&quot;</span>,
            <span class="st">&quot;Titus Andronicus&quot;</span>, <span class="st">&quot;Sonnets&quot;</span>, 
            <span class="st">&quot;The Rape of Lucrece&quot;</span>, <span class="st">&quot;Venus and Adonis&quot;</span>, <span class="st">&quot;A Funeral Elegy&quot;</span>, <span class="st">&quot;The Phoenix and the Turtle&quot;</span>)

shakes_trim =<span class="st"> </span>shakes_trim %&gt;%
<span class="st">  </span><span class="kw">filter</span>(text !=<span class="st"> &#39;&#39;</span>,                     <span class="co"># empties</span>
         !text %in%<span class="st"> </span>titles,              <span class="co"># titles</span>
         !<span class="kw">str_detect</span>(text, <span class="st">&#39;^ACT|^SCENE|^Enter|^Exit|^Exeunt|^Sonnet&#39;</span>)  <span class="co"># acts etc.</span>
         )

shakes_trim %&gt;%<span class="st"> </span><span class="kw">filter</span>(id==<span class="st">&#39;Romeo_and_Juliet&#39;</span>) <span class="co"># we&#39;ll get prologue later</span></code></pre></div>
<pre><code># A tibble: 3,992 x 2
                 id                                            text
              &lt;chr&gt;                                           &lt;chr&gt;
 1 Romeo_and_Juliet                                        PROLOGUE
 2 Romeo_and_Juliet          Two households, both alike in dignity,
 3 Romeo_and_Juliet         In fair Verona, where we lay our scene,
 4 Romeo_and_Juliet        From ancient grudge break to new mutiny,
 5 Romeo_and_Juliet    Where civil blood makes civil hands unclean.
 6 Romeo_and_Juliet    From forth the fatal loins of these two foes
 7 Romeo_and_Juliet  A pair of star-cross&#39;d lovers take their life;
 8 Romeo_and_Juliet          Whose misadventured piteous overthrows
 9 Romeo_and_Juliet Do with their death bury their parents&#39; strife.
10 Romeo_and_Juliet The fearful passage of their death-mark&#39;d love,
# ... with 3,982 more rows</code></pre>
</div>
<div id="scene-iii.-classification-of-works" class="section level3">
<h3>Scene III. Classification of works</h3>
<p>While we’re at it, we can save the classical (sometimes arbitrary) classifications of Shakespeare’s works for later comparison to what we’ll get in our analyses. We’ll save them to call as needed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shakes_types =<span class="st"> </span><span class="kw">data_frame</span>(<span class="dt">title=</span><span class="kw">unique</span>(shakes_trim$id)) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">class =</span> <span class="st">&#39;Comedy&#39;</span>,
         <span class="dt">class =</span> <span class="kw">if_else</span>(<span class="kw">grepl</span>(title, <span class="dt">pattern=</span><span class="st">&#39;Adonis|Lucrece|Complaint|Turtle|Pilgrim|Sonnet|Elegy&#39;</span>), <span class="st">&#39;Poem&#39;</span>, class),
         <span class="dt">class =</span> <span class="kw">if_else</span>(<span class="kw">grepl</span>(title, <span class="dt">pattern=</span><span class="st">&#39;Henry|Richard|John&#39;</span>), <span class="st">&#39;History&#39;</span>, class),
         <span class="dt">class =</span> <span class="kw">if_else</span>(<span class="kw">grepl</span>(title, <span class="dt">pattern=</span><span class="st">&#39;Troilus|Coriolanus|Titus|Romeo|Timon|Julius|Macbeth|Hamlet|Othello|Antony|Cymbeline|Lear&#39;</span>), <span class="st">&#39;Tragedy&#39;</span>, class),
         <span class="dt">problem =</span> <span class="kw">if_else</span>(<span class="kw">grepl</span>(title, <span class="dt">pattern=</span><span class="st">&#39;Measure|Merchant|^All|Troilus|Timon|Passion&#39;</span>), <span class="st">&#39;Problem&#39;</span>, <span class="st">&#39;Not&#39;</span>),
         <span class="dt">late_romance =</span> <span class="kw">if_else</span>(<span class="kw">grepl</span>(title, <span class="dt">pattern=</span><span class="st">&#39;Cymbeline|Kinsmen|Pericles|Winter|Tempest&#39;</span>), <span class="st">&#39;Late&#39;</span>, <span class="st">&#39;Other&#39;</span>))

<span class="kw">save</span>(shakes_types, <span class="dt">file=</span><span class="st">&#39;data/shakespeare_classification.RData&#39;</span>) <span class="co"># save for later</span></code></pre></div>
</div>
</div>
<div id="act-iii.-stop-words" class="section level2">
<h2>ACT III. Stop words</h2>
<p>As we’ve noted before, we’ll want to get rid of stop words, things like articles, possessive pronouns, and other very common words. In this case, we also want to include character names. However, the big wrinkle here is that this is not everyday English, so we need to get ye, thee, thine etc. In addition there are things that need to be replaced like o’er to over, which may then also be removed. In short, this is not so straightforward.</p>
<div id="scene-i.-character-names" class="section level3">
<h3>Scene I. Character names</h3>
<p>We’ll get the list of character names from <a href="http://opensourceshakespeare.org/">opensourceshakespeare.org</a> via <span class="pack">rvest</span>, but I added some from the poems and others that came through, e.g. abbreviated names.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shakes_char_url =<span class="st"> &#39;https://www.opensourceshakespeare.org/views/plays/characters/chardisplay.php&#39;</span>
page0 =<span class="st"> </span><span class="kw">read_html</span>(shakes_char_url)
tabs =<span class="st"> </span>page0 %&gt;%<span class="st"> </span><span class="kw">html_table</span>()
shakes_char =<span class="st"> </span>tabs[[<span class="dv">2</span>]][-(<span class="dv">1</span>:<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>)] <span class="co"># remove header and phantom columns</span>
<span class="kw">colnames</span>(shakes_char) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Nspeeches&#39;</span>, <span class="st">&#39;Character&#39;</span>, <span class="st">&#39;Play&#39;</span>)
shakes_char =<span class="st"> </span>shakes_char %&gt;%
<span class="st">  </span><span class="kw">distinct</span>(Character,<span class="dt">.keep_all=</span>T)

<span class="kw">save</span>(shakes_char, <span class="dt">file=</span><span class="st">&#39;data/shakespeare_characters.RData&#39;</span>)</code></pre></div>
<p>A new snag is that some characters with multiple names may be represented (typically) by the first or last or in the case of three, the middle, e.g. Sir Toby Belch. Others are still difficultly named e.g. RICHARD PLANTAGENET (DUKE OF GLOUCESTER). The following should capture everything by splitting the names on spaces, removing parentheses, and keeping unique terms.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># remove paren and split</span>
chars =<span class="st"> </span>shakes_char$Character
chars =<span class="st"> </span><span class="kw">str_replace_all</span>(chars, <span class="st">&#39;</span><span class="ch">\\</span><span class="st">(|</span><span class="ch">\\</span><span class="st">)&#39;</span>, <span class="st">&#39;&#39;</span>)
chars =<span class="st"> </span><span class="kw">str_split</span>(chars, <span class="st">&#39; &#39;</span>) %&gt;%
<span class="st">  </span>unlist

<span class="co"># these were found after intial processsing</span>
chars_other =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;enobarbus&#39;</span>, <span class="st">&#39;marcius&#39;</span>, <span class="st">&#39;katharina&#39;</span>, <span class="st">&#39;clarence&#39;</span>,<span class="st">&#39;pyramus&#39;</span>,
                <span class="st">&#39;andrew&#39;</span>, <span class="st">&#39;arcite&#39;</span>, <span class="st">&#39;perithous&#39;</span>, <span class="st">&#39;hippolita&#39;</span>, <span class="st">&#39;schoolmaster&#39;</span>,
                <span class="st">&#39;cressid&#39;</span>, <span class="st">&#39;diomed&#39;</span>, <span class="st">&#39;kate&#39;</span>, <span class="st">&#39;titinius&#39;</span>, <span class="st">&#39;Palamon&#39;</span>, <span class="st">&#39;Tarquin&#39;</span>,
                <span class="st">&#39;lucrece&#39;</span>, <span class="st">&#39;isidore&#39;</span>, <span class="st">&#39;tom&#39;</span>, <span class="st">&#39;thisbe&#39;</span>, <span class="st">&#39;paul&#39;</span>,
                <span class="st">&#39;aemelia&#39;</span>, <span class="st">&#39;sycorax&#39;</span>, <span class="st">&#39;montague&#39;</span>, <span class="st">&#39;capulet&#39;</span>, <span class="st">&#39;collatinus&#39;</span>)

chars =<span class="st"> </span><span class="kw">unique</span>(<span class="kw">c</span>(chars, chars_other))

chars =<span class="st">  </span>chars[chars !=<span class="st"> &#39;&#39;</span>]
<span class="kw">sample</span>(chars)[<span class="dv">1</span>:<span class="dv">3</span>]</code></pre></div>
<pre><code>[1] &quot;Children&quot; &quot;Dionyza&quot;  &quot;Aaron&quot;   </code></pre>
</div>
<div id="scene-ii.-old-middle-modern-english" class="section level3">
<h3>Scene II. Old, Middle, &amp; Modern English</h3>
<p>While Shakespeare is considered <a href="https://en.wikipedia.org/wiki/Early_Modern_English">Early Modern English</a>, some text may be more historical, so I include Middle and Old English stopwords, as they were readily available from the <span class="pack">cltk</span> Python module (<a href="https://github.com/cltk/cltk">link</a>) and also found. I also added some things to the ME list like “thou’ldst” that I found lingering after initial passes. In my initial use of Gutenberg texts, the Old English might have had some utility, but with these texts it only removes ‘wit’, so I refrain from using it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># old and me from python cltk module; </span>
<span class="co"># em from http://earlymodernconversions.com/wp-content/uploads/2013/12/stopwords.txt; </span>
<span class="co"># I also added some to me</span>

old_stops0 =<span class="st"> </span><span class="kw">read_lines</span>(<span class="st">&#39;data/old_english_stop_words.txt&#39;</span>)
<span class="co"># sort(old_stops0)</span>
old_stops =<span class="st"> </span><span class="kw">data_frame</span>(<span class="dt">word=</span><span class="kw">str_conv</span>(old_stops0, <span class="st">&#39;UTF8&#39;</span>),
                      <span class="dt">lexicon =</span> <span class="st">&#39;cltk&#39;</span>)

me_stops0 =<span class="st"> </span><span class="kw">read_lines</span>(<span class="st">&#39;data/middle_english_stop_words&#39;</span>)
<span class="co"># sort(me_stops0)</span>
me_stops =<span class="st"> </span><span class="kw">data_frame</span>(<span class="dt">word=</span><span class="kw">str_conv</span>(me_stops0, <span class="st">&#39;UTF8&#39;</span>),
                      <span class="dt">lexicon =</span> <span class="st">&#39;cltk&#39;</span>)

em_stops0 =<span class="st"> </span><span class="kw">read_lines</span>(<span class="st">&#39;data/early_modern_english_stop_words.txt&#39;</span>)
<span class="co"># sort(em_stops0)</span>
em_stops =<span class="st"> </span><span class="kw">data_frame</span>(<span class="dt">word=</span><span class="kw">str_conv</span>(em_stops0, <span class="st">&#39;UTF8&#39;</span>),
                      <span class="dt">lexicon =</span> <span class="st">&#39;emc&#39;</span>)</code></pre></div>
</div>
<div id="scene-iii.-remove-stopwords" class="section level3">
<h3>Scene III. Remove stopwords</h3>
<p>We’re now ready to start removing words. However, right now, we have lines not words. We can use the <span class="pack">tidytext</span> function <span class="func">unnest_tokens</span>, which is like <span class="func">unnest</span> from <span class="pack">tidyr</span>, but works on different tokens, e.g. words, sentences, or paragraphs. Note that by default, the function will make all words lower case.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidytext)

shakes_words =<span class="st"> </span>shakes_trim %&gt;%
<span class="st">  </span><span class="kw">unnest_tokens</span>(word, text, <span class="dt">token=</span><span class="st">&#39;words&#39;</span>)</code></pre></div>
<p>We also will be doing a little stemming here. I’m getting rid of suffixes that end with the suffix after an apostrophe. Many of the remaining words will either be stopwords or need to be further stemmed later. I also created a middle/modern English stemmer for words that are not caught otherwise (<span class="func">me_st_stem</span>). Again this is the sort of thing you discover after initial passes (e.g. ‘criedst’). We can do that, then the <span class="func">anti_join</span> of all the stopwords.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="st">&#39;r/st_stem.R&#39;</span>)

shakes_words =<span class="st"> </span>shakes_words %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">str_trim</span>(word),    <span class="co"># remove possible whitespace</span>
         <span class="dt">word =</span> <span class="kw">str_replace</span>(word, <span class="st">&quot;&#39;er$|&#39;d$|&#39;t$|&#39;ld$|&#39;rt$|&#39;st$|&#39;dst$&quot;</span>, <span class="st">&#39;&#39;</span>),    <span class="co"># remove me style endings</span>
         <span class="dt">word =</span> <span class="kw">str_replace_all</span>(word, <span class="st">&quot;[0-9]&quot;</span>, <span class="st">&#39;&#39;</span>),    <span class="co"># remove sonnet numbers</span>
         <span class="dt">word =</span> <span class="kw">vapply</span>(word, me_st_stem, <span class="st">&#39;a&#39;</span>)) %&gt;%
<span class="st">  </span><span class="kw">anti_join</span>(em_stops) %&gt;%
<span class="st">  </span><span class="kw">anti_join</span>(me_stops) %&gt;%
<span class="st">  </span><span class="kw">anti_join</span>(<span class="kw">data_frame</span>(<span class="dt">word=</span><span class="kw">str_to_lower</span>(<span class="kw">c</span>(chars, <span class="st">&#39;prologue&#39;</span>, <span class="st">&#39;epilogue&#39;</span>)))) %&gt;%
<span class="st">  </span><span class="kw">anti_join</span>(<span class="kw">data_frame</span>(<span class="dt">word=</span><span class="kw">str_to_lower</span>(<span class="kw">paste0</span>(chars, <span class="st">&quot;&#39;s&quot;</span>)))) %&gt;%<span class="st">     </span><span class="co"># remove possessive names</span>
<span class="st">  </span><span class="kw">anti_join</span>(stop_words)</code></pre></div>
<p>As before, you should do a couple spot checks.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">any</span>(shakes_words$word ==<span class="st"> &#39;romeo&#39;</span>)
<span class="kw">any</span>(shakes_words$word ==<span class="st"> &#39;prologue&#39;</span>)
<span class="kw">any</span>(shakes_words$word ==<span class="st"> &#39;mayst&#39;</span>)</code></pre></div>
<pre><code>[1] FALSE
[1] FALSE
[1] FALSE</code></pre>
</div>
</div>
<div id="act-iv.-other-fixes" class="section level2">
<h2>ACT IV. Other fixes</h2>
<p>Now we’re ready to finally do the word counts. Just kidding! There is <em>still</em> work to do the for the remainder, and you’ll continue to spot things after runs. A big issue is the words that end in ‘st’ and ‘est’, and others that are not consistently spelled or otherwise need to be dealt with. For example, ‘crost’ will not be stemmed to ‘cross’, as ‘crossed’ would be. Finally, I limit the result to any words that have more than two characters, as my inspection suggested these be left-over suffixes or otherwise would be considered stopwords anyway.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># porter should catch remaining &#39;est&#39;</span>

add_a =<span class="st">  </span><span class="kw">c</span>(<span class="st">&#39;mongst&#39;</span>, <span class="st">&#39;gainst&#39;</span>)  <span class="co"># words to add a to</span>

shakes_words =<span class="st"> </span>shakes_words %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">word =</span> <span class="kw">if_else</span>(word==<span class="st">&#39;honour&#39;</span>, <span class="st">&#39;honor&#39;</span>, word),
         <span class="dt">word =</span> <span class="kw">if_else</span>(word==<span class="st">&#39;durst&#39;</span>, <span class="st">&#39;dare&#39;</span>, word),
         <span class="dt">word =</span> <span class="kw">if_else</span>(word==<span class="st">&#39;wast&#39;</span>, <span class="st">&#39;was&#39;</span>, word),
         <span class="dt">word =</span> <span class="kw">if_else</span>(word==<span class="st">&#39;dust&#39;</span>, <span class="st">&#39;does&#39;</span>, word),
         <span class="dt">word =</span> <span class="kw">if_else</span>(word==<span class="st">&#39;curst&#39;</span>, <span class="st">&#39;cursed&#39;</span>, word),
         <span class="dt">word =</span> <span class="kw">if_else</span>(word==<span class="st">&#39;blest&#39;</span>, <span class="st">&#39;blessed&#39;</span>, word),
         <span class="dt">word =</span> <span class="kw">if_else</span>(word==<span class="st">&#39;crost&#39;</span>, <span class="st">&#39;crossed&#39;</span>, word),
         <span class="dt">word =</span> <span class="kw">if_else</span>(word==<span class="st">&#39;accurst&#39;</span>, <span class="st">&#39;accursed&#39;</span>, word),
         <span class="dt">word =</span> <span class="kw">if_else</span>(word %in%<span class="st"> </span>add_a,
                        <span class="kw">paste0</span>(<span class="st">&#39;a&#39;</span>, word),
                        word),
         <span class="dt">word =</span> <span class="kw">str_replace</span>(word, <span class="st">&quot;&#39;s$&quot;</span>, <span class="st">&#39;&#39;</span>),                <span class="co"># strip remaining possessives</span>
         <span class="dt">word =</span> <span class="kw">if_else</span>(<span class="kw">str_detect</span>(word, <span class="dt">pattern=</span><span class="st">&quot;o&#39;er&quot;</span>),    <span class="co"># change o&#39;er over</span>
                        <span class="kw">str_replace</span>(word, <span class="st">&quot;&#39;&quot;</span>, <span class="st">&#39;v&#39;</span>),
                        word)) %&gt;%
<span class="st">  </span><span class="kw">filter</span>(!(id==<span class="st">&#39;Antony_and_Cleopatra&#39;</span> &amp;<span class="st"> </span>word ==<span class="st"> &#39;mark&#39;</span>)) %&gt;%<span class="st">     </span><span class="co"># mark here is almost exclusively the character name</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_count</span>(word)&gt;<span class="dv">2</span>)</code></pre></div>
<p>At this point we could still maybe add things to this list of additional fixes, but I think it’s time to actually start playing with the data.</p>
</div>
<div id="act-v.-fun-stuff" class="section level2">
<h2>ACT V. Fun stuff</h2>
<p>We are finally ready to get to the fun stuff. Finally! And now things get easy.</p>
<div id="scene-i.-count-the-terms" class="section level3">
<h3>Scene I. Count the terms</h3>
<p>We can get term counts with standard <span class="pack">dplyr</span> approaches, and <span class="pack">tidytext</span> will take that and do the other things we might want. Specifically, we can use the latter to create the document term matrix which will be used in other analysis. The function <span class="func">cast_dfm</span> will create a dfm class object, or ‘document-feature’ matrix, which is the same thing but recognizes this sort of stuff is not specific to words. With word counts in hand, now would be a good save point since they’ll serve as the basis for other things.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">term_counts =<span class="st"> </span>shakes_words %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(id, word) %&gt;%
<span class="st">  </span>count

term_counts %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n))

<span class="kw">library</span>(quanteda)
shakes_dtm =<span class="st"> </span>term_counts %&gt;%
<span class="st">  </span><span class="kw">cast_dfm</span>(<span class="dt">document=</span>id, <span class="dt">term=</span>word, <span class="dt">value=</span>n)

## save(shakes_words, term_counts, shakes_dtm, file=&#39;data/shakes_words_df.RData&#39;)</code></pre></div>
<pre><code># A tibble: 115,978 x 3
# Groups:   id, word [115,978]
                            id  word     n
                         &lt;chr&gt; &lt;chr&gt; &lt;int&gt;
 1                     Sonnets  love   195
 2 The_Two_Gentlemen_of_Verona  love   171
 3            Romeo_and_Juliet  love   150
 4              As_You_Like_It  love   118
 5        Love_s_Labour_s_Lost  love   118
 6   A_Midsummer_Night_s_Dream  love   114
 7                 Richard_III   god   111
 8            Titus_Andronicus  rome   103
 9      Much_Ado_about_Nothing  love    92
10                  Coriolanus  rome    90
# ... with 115,968 more rows</code></pre>
<p>Now things are looking like Shakespeare, with love for everyone<a href="#fn11" class="footnoteRef" id="fnref11"><sup>11</sup></a>. You’ll notice I’ve kept place names such as Rome, but this might be something you’d prefer to remove. Other candidates would be madam, woman, man, majesty (as in ‘his/her’) etc. This sort of thing is up to the researcher.</p>
</div>
<div id="scene-ii.-stemming" class="section level3">
<h3>Scene II. Stemming</h3>
<p>Now we’ll <span class="emph"></span> the words. While this is actually a pre-processing step, one that we’d do along with (typically after) stopword removal. I do it here to mostly demonstrate how to use <span class="pack">quanteda</span> to do it, as it can also be used to remove stopwords and do many of the other things we did with <span class="pack">tidytext</span>.</p>
<p>Stemming will make words like eye and eyes just <em>ey</em>, or convert war, wars and warring to <em>war</em>. In other words it will reduce variations of a word to a common root form, or ‘word stem’. We could have done this in a step prior to counting the terms, but then you only have the stemmed result to work with for the document term matrix from then on. Depending on your situation, you may or may not want to stem, or maybe you’d want to compare results. The <span class="pack">quanteda</span> package will actually stem with the DTM and collapse the word counts accordingly. I note the difference in words before and after.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shakes_dtm
<span class="kw">ncol</span>(shakes_dtm)

shakes_dtm =<span class="st"> </span>shakes_dtm %&gt;%
<span class="st">  </span><span class="kw">dfm_wordstem</span>()

shakes_dtm
<span class="kw">ncol</span>(shakes_dtm)</code></pre></div>
<pre><code>Document-feature matrix of: 43 documents, 22,059 features (87.8% sparse).
[1] 22059
Document-feature matrix of: 43 documents, 13,714 features (84% sparse).
[1] 13714</code></pre>
<p>The result is notably fewer columns, which will speed up any analysis, as well as a slightly more dense matrix.</p>
</div>
<div id="scene-iii.-exploration" class="section level3">
<h3>Scene III. Exploration</h3>
<div id="top-features" class="section level4">
<h4>Top features</h4>
<p>Let’s start looking more in depth. The following shows the 10 most common words and their respective counts. This is also an easy way to find candidates to add to the stopword list. Note that dai and prai are stems for day and pray. Love occurs 2.15 times as much as the most frequent word!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">top10 =<span class="st"> </span><span class="kw">topfeatures</span>(shakes_dtm, <span class="dv">10</span>)
top10</code></pre></div>
<pre><code> love heart   god    ey   dai  hand  hear  live death night 
 2917  1359  1280  1275  1229  1226  1043  1015  1010   977 </code></pre>
<p>The following is a word cloud. They are among the most useless visual displays imaginable. Just because you can, doesn’t mean you should.</p>
<p><img src="text_analysis_files/figure-html/wordcloud-1.svg" width="672" style="display: block; margin: auto;" /></p>
<p>If you want to display relative frequency do so.</p>
<div id="323c6e25c7d" style="width:auto;height:360px;" class="plotly html-widget"></div>
<script type="application/json" data-for="323c6e25c7d">{"x":{"data":[{"x":[1],"y":[0.212702347965583],"text":"love","hovertext":"term: love<br />percentage: 0.21270235<br />percentage: 0.21270235<br />term: love<br />term: love","textfont":{"size":30.2362204724409,"color":"rgba(248,118,109,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"love","legendgroup":"love","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2],"y":[0.0990958144961353],"text":"heart","hovertext":"term: heart<br />percentage: 0.09909581<br />percentage: 0.09909581<br />term: heart<br />term: heart","textfont":{"size":19.2501619487208,"color":"rgba(234,131,49,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"heart","legendgroup":"heart","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3],"y":[0.0933352778182879],"text":"god","hovertext":"term: god<br />percentage: 0.09333528<br />percentage: 0.09333528<br />term: god<br />term: god","textfont":{"size":18.4004945113787,"color":"rgba(216,144,0,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"god","legendgroup":"god","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4],"y":[0.0929706868893102],"text":"ey","hovertext":"term: ey<br />percentage: 0.09297069<br />percentage: 0.09297069<br />term: ey<br />term: ey","textfont":{"size":18.3444660257482,"color":"rgba(192,155,0,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"ey","legendgroup":"ey","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[5],"y":[0.0896164503427155],"text":"dai","hovertext":"term: dai<br />percentage: 0.08961645<br />percentage: 0.08961645<br />term: dai<br />term: dai","textfont":{"size":17.8146520032488,"color":"rgba(163,165,0,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"dai","legendgroup":"dai","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[6],"y":[0.0893976957853289],"text":"hand","hovertext":"term: hand<br />percentage: 0.08939770<br />percentage: 0.08939770<br />term: hand<br />term: hand","textfont":{"size":17.7791449253317,"color":"rgba(124,174,0,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"hand","legendgroup":"hand","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[7],"y":[0.0760536677847455],"text":"hear","hovertext":"term: hear<br />percentage: 0.07605367<br />percentage: 0.07605367<br />term: hear<br />term: hear","textfont":{"size":15.3115576622832,"color":"rgba(57,182,0,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"hear","legendgroup":"hear","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[8],"y":[0.0740119585824705],"text":"live","hovertext":"term: live<br />percentage: 0.07401196<br />percentage: 0.07401196<br />term: live<br />term: live","textfont":{"size":14.8608128200628,"color":"rgba(0,187,78,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"live","legendgroup":"live","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[9],"y":[0.0736473676534928],"text":"death","hovertext":"term: death<br />percentage: 0.07364737<br />percentage: 0.07364737<br />term: death<br />term: death","textfont":{"size":14.7773614199171,"color":"rgba(0,191,125,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"death","legendgroup":"death","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[10],"y":[0.07124106752224],"text":"night","hovertext":"term: night<br />percentage: 0.07124107<br />percentage: 0.07124107<br />term: night<br />term: night","textfont":{"size":14.2003348167828,"color":"rgba(0,193,163,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"night","legendgroup":"night","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[11],"y":[0.0706577220358758],"text":"word","hovertext":"term: word<br />percentage: 0.07065772<br />percentage: 0.07065772<br />term: word<br />term: word","textfont":{"size":14.0527323938833,"color":"rgba(0,191,196,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"word","legendgroup":"word","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[12],"y":[0.0694181128773516],"text":"fear","hovertext":"term: fear<br />percentage: 0.06941811<br />percentage: 0.06941811<br />term: fear<br />term: fear","textfont":{"size":13.7273610183885,"color":"rgba(0,186,224,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"fear","legendgroup":"fear","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[13],"y":[0.0689076855767829],"text":"life","hovertext":"term: life<br />percentage: 0.06890769<br />percentage: 0.06890769<br />term: life<br />term: life","textfont":{"size":13.5882831067968,"color":"rgba(0,176,246,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"life","legendgroup":"life","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[14],"y":[0.0680326673472364],"text":"friend","hovertext":"term: friend<br />percentage: 0.06803267<br />percentage: 0.06803267<br />term: friend<br />term: friend","textfont":{"size":13.3420874479867,"color":"rgba(53,162,255,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"friend","legendgroup":"friend","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[15],"y":[0.0647513489864372],"text":"sweet","hovertext":"term: sweet<br />percentage: 0.06475135<br />percentage: 0.06475135<br />term: sweet<br />term: sweet","textfont":{"size":12.3064739838233,"color":"rgba(149,144,255,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"sweet","legendgroup":"sweet","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[16],"y":[0.0627096397841622],"text":"heaven","hovertext":"term: heaven<br />percentage: 0.06270964<br />percentage: 0.06270964<br />term: heaven<br />term: heaven","textfont":{"size":11.5279788673328,"color":"rgba(199,124,255,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"heaven","legendgroup":"heaven","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[17],"y":[0.0623450488551845],"text":"fair","hovertext":"term: fair<br />percentage: 0.06234505<br />percentage: 0.06234505<br />term: fair<br />term: fair","textfont":{"size":11.3722737134473,"color":"rgba(231,107,243,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"fair","legendgroup":"fair","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18],"y":[0.0623450488551845],"text":"true","hovertext":"term: true<br />percentage: 0.06234505<br />percentage: 0.06234505<br />term: true<br />term: true","textfont":{"size":11.3722737134473,"color":"rgba(250,98,219,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"true","legendgroup":"true","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19],"y":[0.0587720577512032],"text":"prai","hovertext":"term: prai<br />percentage: 0.05877206<br />percentage: 0.05877206<br />term: prai<br />term: prai","textfont":{"size":9.19177777579009,"color":"rgba(255,98,188,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"prai","legendgroup":"prai","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[20],"y":[0.0579699577074522],"text":"stand","hovertext":"term: stand<br />percentage: 0.05796996<br />percentage: 0.05796996<br />term: stand<br />term: stand","textfont":{"size":7.55905511811024,"color":"rgba(255,106,152,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"stand","legendgroup":"stand","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":28.4931506849315,"l":48.9497716894977},"paper_bgcolor":"transparent","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"type":"linear","autorange":false,"range":[0.4,20.6],"tickmode":"array","ticktext":["love","heart","god","ey","dai","hand","hear","live","death","night","word","fear","life","friend","sweet","heaven","fair","true","prai","stand"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],"categoryorder":"array","categoryarray":["love","heart","god","ey","dai","hand","hear","live","death","night","word","fear","life","friend","sweet","heaven","fair","true","prai","stand"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":"term","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"type":"linear","autorange":false,"range":[-0.0125,0.2625],"tickmode":"array","ticktext":["0.00","0.05","0.10","0.15","0.20","0.25"],"tickvals":[0,0.05,0.1,0.15,0.2,0.25],"categoryorder":"array","categoryarray":["0.00","0.05","0.10","0.15","0.20","0.25"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(127,127,127,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"percentage","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"transparent","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","width":"auto","height":360,"barmode":"relative","plot_bgcolor":"transparent"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false,"showLink":false,"displaylogo":false,"modeBarButtonsToRemove":["pan2d"]},"source":"A","attrs":{"323c7ac469f0":{"x":{},"y":{},"size":{},"label":{},"colour":{},"type":"scatter"}},"cur_data":"323c7ac469f0","visdat":{"323c7ac469f0":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
<div id="similarity" class="section level4">
<h4>Similarity</h4>
<p>The <span class="pack">quanteda</span> package has some built in similarity measures such as <a href="https://en.wikipedia.org/wiki/Cosine_similarity">cosine similarity</a>, which you can treat similarly to the standard correlation (also available). I display it visually to better get a sense of things.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## textstat_simil(shakes_dtm, margin = &quot;documents&quot;, method = &quot;cosine&quot;)</code></pre></div>
<div id="htmlwidget-555a09ec42a22174e8bf" style="width:672px;height:500px;" class="d3heatmap html-widget"></div>
<script type="application/json" data-for="htmlwidget-555a09ec42a22174e8bf">{"x":{"rows":null,"cols":null,"matrix":{"data":["1","0.79","0.803","0.791","0.75","0.793","0.734","0.719","0.699","0.68","0.462","0.491","0.564","0.554","0.497","0.513","0.193","0.592","0.65","0.579","0.624","0.601","0.68","0.692","0.625","0.611","0.683","0.638","0.68","0.688","0.507","0.618","0.708","0.663","0.55","0.6","0.702","0.498","0.569","0.524","0.567","0.601","0.349","0.79","1","0.806","0.718","0.725","0.769","0.739","0.754","0.709","0.656","0.484","0.533","0.577","0.591","0.516","0.556","0.191","0.603","0.674","0.571","0.644","0.615","0.671","0.669","0.641","0.622","0.667","0.595","0.668","0.676","0.527","0.611","0.697","0.672","0.539","0.595","0.698","0.456","0.545","0.494","0.579","0.638","0.361","0.803","0.806","1","0.738","0.747","0.757","0.739","0.72","0.699","0.683","0.552","0.583","0.625","0.603","0.584","0.565","0.238","0.677","0.729","0.61","0.645","0.605","0.692","0.702","0.633","0.644","0.679","0.626","0.669","0.706","0.54","0.645","0.708","0.699","0.544","0.653","0.725","0.495","0.592","0.523","0.613","0.616","0.358","0.791","0.718","0.738","1","0.699","0.776","0.67","0.719","0.65","0.643","0.471","0.485","0.53","0.528","0.499","0.506","0.204","0.542","0.611","0.563","0.628","0.622","0.656","0.669","0.597","0.585","0.639","0.596","0.634","0.641","0.512","0.617","0.674","0.618","0.517","0.564","0.657","0.459","0.534","0.478","0.539","0.579","0.371","0.75","0.725","0.747","0.699","1","0.706","0.739","0.719","0.713","0.634","0.476","0.505","0.597","0.593","0.534","0.509","0.18","0.628","0.616","0.598","0.674","0.608","0.674","0.668","0.55","0.628","0.65","0.564","0.645","0.653","0.453","0.632","0.679","0.643","0.535","0.595","0.692","0.507","0.578","0.506","0.594","0.539","0.348","0.793","0.769","0.757","0.776","0.706","1","0.692","0.726","0.668","0.666","0.527","0.536","0.593","0.58","0.555","0.563","0.213","0.575","0.645","0.588","0.646","0.618","0.69","0.711","0.648","0.605","0.667","0.596","0.67","0.639","0.492","0.62","0.685","0.646","0.55","0.602","0.686","0.495","0.589","0.513","0.594","0.613","0.385","0.734","0.739","0.739","0.67","0.739","0.692","1","0.682","0.776","0.668","0.471","0.468","0.603","0.58","0.516","0.479","0.179","0.662","0.65","0.63","0.647","0.643","0.685","0.691","0.568","0.672","0.691","0.636","0.681","0.699","0.483","0.65","0.716","0.682","0.572","0.627","0.717","0.577","0.618","0.545","0.62","0.544","0.319","0.719","0.754","0.72","0.719","0.719","0.726","0.682","1","0.687","0.664","0.494","0.567","0.574","0.608","0.578","0.573","0.201","0.571","0.675","0.615","0.67","0.601","0.666","0.673","0.608","0.573","0.654","0.616","0.678","0.648","0.504","0.619","0.68","0.642","0.546","0.642","0.725","0.492","0.557","0.522","0.599","0.632","0.384","0.699","0.709","0.699","0.65","0.713","0.668","0.776","0.687","1","0.641","0.462","0.483","0.592","0.575","0.541","0.511","0.18","0.624","0.636","0.617","0.669","0.605","0.645","0.678","0.537","0.623","0.662","0.611","0.657","0.631","0.455","0.627","0.684","0.627","0.563","0.618","0.697","0.557","0.618","0.535","0.615","0.534","0.319","0.68","0.656","0.683","0.643","0.634","0.666","0.668","0.664","0.641","1","0.439","0.486","0.539","0.504","0.549","0.537","0.196","0.547","0.631","0.572","0.618","0.578","0.659","0.693","0.574","0.6","0.683","0.606","0.683","0.652","0.466","0.614","0.716","0.634","0.589","0.643","0.704","0.485","0.542","0.49","0.559","0.601","0.363","0.462","0.484","0.552","0.471","0.476","0.527","0.471","0.494","0.462","0.439","1","0.785","0.758","0.744","0.718","0.655","0.372","0.7","0.726","0.714","0.594","0.472","0.555","0.536","0.474","0.524","0.592","0.485","0.541","0.531","0.472","0.673","0.557","0.504","0.408","0.655","0.606","0.531","0.634","0.419","0.612","0.438","0.394","0.491","0.533","0.583","0.485","0.505","0.536","0.468","0.567","0.483","0.486","0.785","1","0.738","0.767","0.761","0.766","0.431","0.657","0.743","0.664","0.65","0.436","0.537","0.522","0.478","0.521","0.576","0.474","0.572","0.502","0.555","0.609","0.558","0.537","0.436","0.635","0.62","0.457","0.564","0.408","0.574","0.584","0.478","0.564","0.577","0.625","0.53","0.597","0.593","0.603","0.574","0.592","0.539","0.758","0.738","1","0.739","0.709","0.653","0.333","0.767","0.731","0.748","0.665","0.536","0.624","0.595","0.522","0.61","0.66","0.576","0.642","0.596","0.513","0.687","0.633","0.594","0.506","0.686","0.677","0.611","0.678","0.508","0.64","0.495","0.401","0.554","0.591","0.603","0.528","0.593","0.58","0.58","0.608","0.575","0.504","0.744","0.767","0.739","1","0.721","0.685","0.309","0.712","0.717","0.718","0.703","0.514","0.585","0.557","0.52","0.537","0.625","0.533","0.623","0.579","0.489","0.653","0.611","0.581","0.484","0.649","0.667","0.545","0.651","0.49","0.629","0.559","0.451","0.497","0.516","0.584","0.499","0.534","0.555","0.516","0.578","0.541","0.549","0.718","0.761","0.709","0.721","1","0.713","0.335","0.662","0.761","0.652","0.649","0.474","0.565","0.581","0.485","0.512","0.602","0.483","0.584","0.511","0.433","0.589","0.57","0.541","0.506","0.642","0.667","0.513","0.617","0.438","0.602","0.55","0.424","0.513","0.556","0.565","0.506","0.509","0.563","0.479","0.573","0.511","0.537","0.655","0.766","0.653","0.685","0.713","1","0.344","0.584","0.726","0.594","0.639","0.444","0.553","0.54","0.516","0.494","0.594","0.443","0.56","0.469","0.433","0.542","0.566","0.529","0.464","0.604","0.616","0.448","0.558","0.427","0.532","0.683","0.484","0.193","0.191","0.238","0.204","0.18","0.213","0.179","0.201","0.18","0.196","0.372","0.431","0.333","0.309","0.335","0.344","1","0.302","0.347","0.287","0.264","0.169","0.213","0.198","0.175","0.183","0.231","0.196","0.215","0.199","0.242","0.268","0.221","0.208","0.166","0.266","0.264","0.211","0.238","0.14","0.226","0.192","0.222","0.592","0.603","0.677","0.542","0.628","0.575","0.662","0.571","0.624","0.547","0.7","0.657","0.767","0.712","0.662","0.584","0.302","1","0.752","0.731","0.66","0.561","0.626","0.626","0.519","0.605","0.645","0.595","0.621","0.604","0.473","0.692","0.642","0.614","0.487","0.702","0.688","0.624","0.719","0.525","0.659","0.49","0.361","0.65","0.674","0.729","0.611","0.616","0.645","0.65","0.675","0.636","0.631","0.726","0.743","0.731","0.717","0.761","0.726","0.347","0.752","1","0.709","0.689","0.537","0.66","0.684","0.581","0.588","0.681","0.603","0.644","0.583","0.525","0.679","0.666","0.652","0.533","0.723","0.753","0.571","0.676","0.533","0.661","0.632","0.38","0.579","0.571","0.61","0.563","0.598","0.588","0.63","0.615","0.617","0.572","0.714","0.664","0.748","0.718","0.652","0.594","0.287","0.731","0.709","1","0.686","0.552","0.649","0.613","0.536","0.604","0.705","0.602","0.652","0.611","0.5","0.719","0.676","0.605","0.534","0.719","0.734","0.62","0.674","0.548","0.658","0.498","0.397","0.624","0.644","0.645","0.628","0.674","0.646","0.647","0.67","0.669","0.618","0.594","0.65","0.665","0.703","0.649","0.639","0.264","0.66","0.689","0.686","1","0.607","0.657","0.655","0.559","0.593","0.671","0.58","0.659","0.604","0.496","0.642","0.675","0.613","0.549","0.678","0.711","0.541","0.62","0.513","0.616","0.597","0.446","0.601","0.615","0.605","0.622","0.608","0.618","0.643","0.601","0.605","0.578","0.472","0.436","0.536","0.514","0.474","0.444","0.169","0.561","0.537","0.552","0.607","1","0.704","0.726","0.631","0.647","0.65","0.57","0.616","0.644","0.406","0.617","0.673","0.596","0.515","0.577","0.617","0.485","0.543","0.474","0.555","0.48","0.326","0.68","0.671","0.692","0.656","0.674","0.69","0.685","0.666","0.645","0.659","0.555","0.537","0.624","0.585","0.565","0.553","0.213","0.626","0.66","0.649","0.657","0.704","1","0.719","0.628","0.678","0.734","0.608","0.701","0.678","0.461","0.702","0.744","0.689","0.596","0.665","0.718","0.534","0.613","0.494","0.611","0.557","0.364","0.692","0.669","0.702","0.669","0.668","0.711","0.691","0.673","0.678","0.693","0.536","0.522","0.595","0.557","0.581","0.54","0.198","0.626","0.684","0.613","0.655","0.726","0.719","1","0.66","0.651","0.689","0.605","0.655","0.649","0.47","0.623","0.698","0.622","0.543","0.645","0.702","0.525","0.598","0.522","0.617","0.573","0.35","0.625","0.641","0.633","0.597","0.55","0.648","0.568","0.608","0.537","0.574","0.474","0.478","0.522","0.52","0.485","0.516","0.175","0.519","0.581","0.536","0.559","0.631","0.628","0.66","1","0.53","0.596","0.513","0.593","0.568","0.424","0.54","0.623","0.558","0.471","0.562","0.606","0.438","0.516","0.459","0.506","0.587","0.333","0.611","0.622","0.644","0.585","0.628","0.605","0.672","0.573","0.623","0.6","0.524","0.521","0.61","0.537","0.512","0.494","0.183","0.605","0.588","0.604","0.593","0.647","0.678","0.651","0.53","1","0.681","0.572","0.651","0.636","0.469","0.657","0.698","0.654","0.541","0.625","0.656","0.508","0.586","0.524","0.62","0.506","0.33","0.683","0.667","0.679","0.639","0.65","0.667","0.691","0.654","0.662","0.683","0.592","0.576","0.66","0.625","0.602","0.594","0.231","0.645","0.681","0.705","0.671","0.65","0.734","0.689","0.596","0.681","1","0.666","0.734","0.685","0.476","0.726","0.749","0.669","0.613","0.71","0.759","0.576","0.647","0.572","0.646","0.612","0.425","0.638","0.595","0.626","0.596","0.564","0.596","0.636","0.616","0.611","0.606","0.485","0.474","0.576","0.533","0.483","0.443","0.196","0.595","0.603","0.602","0.58","0.57","0.608","0.605","0.513","0.572","0.666","1","0.706","0.69","0.546","0.683","0.698","0.63","0.54","0.655","0.689","0.587","0.597","0.531","0.607","0.544","0.311","0.68","0.668","0.669","0.634","0.645","0.67","0.681","0.678","0.657","0.683","0.541","0.572","0.642","0.623","0.584","0.56","0.215","0.621","0.644","0.652","0.659","0.616","0.701","0.655","0.593","0.651","0.734","0.706","1","0.737","0.537","0.709","0.769","0.705","0.645","0.681","0.733","0.568","0.629","0.56","0.641","0.611","0.395","0.688","0.676","0.706","0.641","0.653","0.639","0.699","0.648","0.631","0.652","0.531","0.502","0.596","0.579","0.511","0.469","0.199","0.604","0.583","0.611","0.604","0.644","0.678","0.649","0.568","0.636","0.685","0.69","0.737","1","0.527","0.703","0.729","0.68","0.575","0.661","0.703","0.534","0.597","0.495","0.639","0.52","0.342","0.507","0.527","0.54","0.512","0.453","0.492","0.483","0.504","0.455","0.466","0.472","0.555","0.513","0.489","0.433","0.433","0.242","0.473","0.525","0.5","0.496","0.406","0.461","0.47","0.424","0.469","0.476","0.546","0.537","0.527","1","0.517","0.534","0.519","0.407","0.499","0.534","0.352","0.409","0.375","0.466","0.475","0.299","0.618","0.611","0.645","0.617","0.632","0.62","0.65","0.619","0.627","0.614","0.673","0.609","0.687","0.653","0.589","0.542","0.268","0.692","0.679","0.719","0.642","0.617","0.702","0.623","0.54","0.657","0.726","0.683","0.709","0.703","0.517","1","0.743","0.659","0.538","0.705","0.718","0.585","0.652","0.513","0.683","0.518","0.364","0.708","0.697","0.708","0.674","0.679","0.685","0.716","0.68","0.684","0.716","0.557","0.558","0.633","0.611","0.57","0.566","0.221","0.642","0.666","0.676","0.675","0.673","0.744","0.698","0.623","0.698","0.749","0.698","0.769","0.729","0.534","0.743","1","0.723","0.624","0.705","0.752","0.557","0.628","0.545","0.657","0.612","0.389","0.663","0.672","0.699","0.618","0.643","0.646","0.682","0.642","0.627","0.634","0.504","0.537","0.594","0.581","0.541","0.529","0.208","0.614","0.652","0.605","0.613","0.596","0.689","0.622","0.558","0.654","0.669","0.63","0.705","0.68","0.519","0.659","0.723","1","0.621","0.632","0.703","0.496","0.594","0.525","0.614","0.586","0.332","0.55","0.539","0.544","0.517","0.535","0.55","0.572","0.546","0.563","0.589","0.408","0.436","0.506","0.484","0.506","0.464","0.166","0.487","0.533","0.534","0.549","0.515","0.596","0.543","0.471","0.541","0.613","0.54","0.645","0.575","0.407","0.538","0.624","0.621","1","0.581","0.627","0.462","0.521","0.474","0.515","0.494","0.31","0.6","0.595","0.653","0.564","0.595","0.602","0.627","0.642","0.618","0.643","0.655","0.635","0.686","0.649","0.642","0.604","0.266","0.702","0.723","0.719","0.678","0.577","0.665","0.645","0.562","0.625","0.71","0.655","0.681","0.661","0.499","0.705","0.705","0.632","0.581","1","0.778","0.637","0.654","0.537","0.659","0.561","0.385","0.702","0.698","0.725","0.657","0.692","0.686","0.717","0.725","0.697","0.704","0.606","0.62","0.677","0.667","0.667","0.616","0.264","0.688","0.753","0.734","0.711","0.617","0.718","0.702","0.606","0.656","0.759","0.689","0.733","0.703","0.534","0.718","0.752","0.703","0.627","0.778","1","0.604","0.661","0.558","0.679","0.619","0.409","0.498","0.456","0.495","0.459","0.507","0.495","0.577","0.492","0.557","0.485","0.531","0.457","0.611","0.545","0.513","0.448","0.211","0.624","0.571","0.62","0.541","0.485","0.534","0.525","0.438","0.508","0.576","0.587","0.568","0.534","0.352","0.585","0.557","0.496","0.462","0.637","0.604","1","0.622","0.54","0.583","0.421","0.293","0.569","0.545","0.592","0.534","0.578","0.589","0.618","0.557","0.618","0.542","0.634","0.564","0.678","0.651","0.617","0.558","0.238","0.719","0.676","0.674","0.62","0.543","0.613","0.598","0.516","0.586","0.647","0.597","0.629","0.597","0.409","0.652","0.628","0.594","0.521","0.654","0.661","0.622","1","0.593","0.653","0.464","0.316","0.524","0.494","0.523","0.478","0.506","0.513","0.545","0.522","0.535","0.49","0.419","0.408","0.508","0.49","0.438","0.427","0.14","0.525","0.533","0.548","0.513","0.474","0.494","0.522","0.459","0.524","0.572","0.531","0.56","0.495","0.375","0.513","0.545","0.525","0.474","0.537","0.558","0.54","0.593","1","0.575","0.489","0.272","0.567","0.579","0.613","0.539","0.594","0.594","0.62","0.599","0.615","0.559","0.612","0.574","0.64","0.629","0.602","0.532","0.226","0.659","0.661","0.658","0.616","0.555","0.611","0.617","0.506","0.62","0.646","0.607","0.641","0.639","0.466","0.683","0.657","0.614","0.515","0.659","0.679","0.583","0.653","0.575","1","0.512","0.348","0.601","0.638","0.616","0.579","0.539","0.613","0.544","0.632","0.534","0.601","0.438","0.584","0.495","0.559","0.55","0.683","0.192","0.49","0.632","0.498","0.597","0.48","0.557","0.573","0.587","0.506","0.612","0.544","0.611","0.52","0.475","0.518","0.612","0.586","0.494","0.561","0.619","0.421","0.464","0.489","0.512","1","0.455","0.349","0.361","0.358","0.371","0.348","0.385","0.319","0.384","0.319","0.363","0.394","0.478","0.401","0.451","0.424","0.484","0.222","0.361","0.38","0.397","0.446","0.326","0.364","0.35","0.333","0.33","0.425","0.311","0.395","0.342","0.299","0.364","0.389","0.332","0.31","0.385","0.409","0.293","0.316","0.272","0.348","0.455","1"],"dim":[43,43],"rows":["Henry_VI_Part_2","Richard_II","Richard_III","Henry_VI_Part_1","Henry_V","Henry_VI_Part_3","King_Henry_IV_Part_2","King_John","King_Henry_IV_Part_1","Macbeth","The_Two_Gentlemen_of_Verona","Sonnets","As_You_Like_It","Love_s_Labour_s_Lost","A_Midsummer_Night_s_Dream","Venus_and_Adonis","The_Phoenix_and_the_Turtle","Much_Ado_about_Nothing","Romeo_and_Juliet","Twelfth_Night","Troilus_and_Cressida","Coriolanus","Antony_and_Cleopatra","Julius_Caesar","Titus_Andronicus","Timon_of_Athens","King_Lear","Measure_for_Measure","The_Winter_s_Tale","Henry_VIII","Elegy","All_s_Well_That_Ends_Well","Cymbeline","Pericles_Prince_of_Tyre","The_Tempest","Othello","Hamlet","The_Merry_Wives_of_Windsor","The_Taming_of_the_Shrew","The_Comedy_of_Errors","The_Merchant_of_Venice","The_Rape_of_Lucrece","A_Lover_s_Complaint"],"cols":["Henry_VI_Part_2","Richard_II","Richard_III","Henry_VI_Part_1","Henry_V","Henry_VI_Part_3","King_Henry_IV_Part_2","King_John","King_Henry_IV_Part_1","Macbeth","The_Two_Gentlemen_of_Verona","Sonnets","As_You_Like_It","Love_s_Labour_s_Lost","A_Midsummer_Night_s_Dream","Venus_and_Adonis","The_Phoenix_and_the_Turtle","Much_Ado_about_Nothing","Romeo_and_Juliet","Twelfth_Night","Troilus_and_Cressida","Coriolanus","Antony_and_Cleopatra","Julius_Caesar","Titus_Andronicus","Timon_of_Athens","King_Lear","Measure_for_Measure","The_Winter_s_Tale","Henry_VIII","Elegy","All_s_Well_That_Ends_Well","Cymbeline","Pericles_Prince_of_Tyre","The_Tempest","Othello","Hamlet","The_Merry_Wives_of_Windsor","The_Taming_of_the_Shrew","The_Comedy_of_Errors","The_Merchant_of_Venice","The_Rape_of_Lucrece","A_Lover_s_Complaint"]},"image":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAS0klEQVRYhT2Za6xs533Wf+91Xee2Z9/OPvv4epzj4JyY1MhxmwhK4qSp7RgnVqnSgEOIoBhaiS+oqAiEQNy/gEAKQUJVA23VVElDSFqkpA18gJIqNxTAlzjG9j7H55x9nZk96/6+7+LD2jkfRjMarZn1n/f/f57/8zwj4j/5N/r5ez9AcB6pFDaLaYqKfJJhtMQYhTGKDz+2x7oN3F5UaCmYjSI6F/jr772Xv/v7L3G6atieJSzKlsQoDo9LvA9MNxKMkpyelKS5pSw6Qgg8/sgur91ecef2mjy3PHB5wlnRcPPmOe9/zx6Hy4pxYllVLUXt+OTjl5Hz936Ak2/9IX0P03lObBXaGvoeiqojhB4bKaousKo6nA+c1x1tFzgvOwBc6Olah5IC13k6H1BKYK3CuYALAW0k48yilEApSesCUgiUEnjfo6RACoGQsJFqIqNII43zPeu6w/c9MjjP9Cf+DIvv/jfaLtB0wwlDT5YYpBS0jePOsmaxbjgrWpzvOVpW+NBTdZ7jk5LlsmFVdfSAkpK29dS1Q0pB13q87ykaB0BdO5wPVHWH9z1t4+j7nrNlTV07zirHsmgpW0fROKxRCEBLpZjOc0ZPPsPBN77KO5/9GMfHa3Z3ppyfN+SjCCkFVzZSWh9YlB1CQGw1oe+JtOTh+za4s6yYZZbWBVrvSVKDd4E8NmglOBMNWaSHTsWa2CqiSJMkmvEkJraay1s5PTCNNetRzCw1dNOE86qj6wPSZjEh9PgQeOezH+Olr/wuGxsZJ6cVAMtFhZQC3/fULnC4rDla1pS1o+9BK8HBSUHfD+0q1w1GSVznQcA0syzL4QTTSBN8IPjA7tjSuUDfQ9N4WucpW0dVdhwXHauyZd16TtcNo8QQK4VsioqiaAi+5/h4zbVnnuOVr36ZUW4JoSfLLE3dcVp0lI1DCtBK0nSexbqhdYF5bqkbh5ISG2m873EuUKxb3rxzTmwU3nnK2tE2HqUkZ5VHK0kIPX3f43yPDz1SCrQSuNATQg/A7UXFeeuQ+SQjii3GSC7vTylrx5947uP83y9/iTy33LyxoAe2csulSYy7+II8MezPUyKtePuooA+wqloAmtYjhMAaxaV5yulZRdN4zqsO7wPLRY2Rgrp2w6PqaDpP3XmquuPt05KycZSNo2o925OY7TRCGi3pnMcaxfl5gzWSquq4/vzz/OCLX2R7Z4xAUHaeHx2uSa2mbB0nq5o3Dgs6H7i8ndO2DqMkXesZpQZjJNpIVlXHlUsjkov3hBCMxhFVF4hjTZIYkswSW4XrAsH37M8ztsYxsVHERnJwXHBUNkhjFOM8whjFbCNFSsFkEnP71opHPvY8/+d3v4iJFKNIsT9PaZ0njzR5YticxGglOF03JKlhOHMIPRir6HvYnSacFQ196JFCYIxCa8lWNgC07/u7VBZFijjWHC5rDlc1ne9pXeD+7RFbaTQUOxpHGCORUjDfzBACLl+ZYq3i8Rc+wR9//rdIjaTvYZZHbE8TfOipW4cPPXuzFCEE09SSjyLSH/OrC6wrR6wVXeeRAtrW0XWeLvToi1Ho+5669TSNJ4SeS9OYvVnKJDXMRxGHy4pV26E//NgeVRe4s6y5spHi+57TomMrt5SdZxQpfuZf/E3+4d/6l2w+8UF0ZFBaEVvFdJbwvdtn/OCHxzSN4+iw4P57p1zdHREZhTWSnXHESdGhpODq7oiTSYKSAh9guax597UtpnnEte2YL/zRDfYujViUHW8dr3l0f5eXby7509fmFK1HrtvAWTkgvfWBovX4EBBiQGHlAselY/OJD3L8P/8AYzRd61gXLTcOFtw578gu+HU0ijhbNUzioVCtJKEHARgt0UpQNo7Yag5OS2bThB4om46iCRij6HzP/ixmZ5qglWAUa779/xa8ftKgby8qnA8sq45F2XG4rJECDpc1qdW8duucWR6hI8OVi8Vx5cmnSWLDeBJxdZ5ycGNBkljuHK3Z2cp59bDgreOCLNIA3DguWK0bAI6WNVXruTxPefWNM+rOM0oMB5Fmfd4gpeBbPzrl7KxiI484Wta8+/4N7p1FSC0FnQ/ERiEEd3k0Nop102G1JIs1SiuapuPKk09z8I2v4VygrhyRkkzGMUZLkkhTli2RUYwTwyg2CAG7s4Q4MYxTi9ESqyWJVcTJoAGMkiRakqQGqQTbkxgbKayWSCU4XtUcFx1yNorYnaZEWhJbzXw0UMbmOCazmiw2rMqO2CqEECSx4YGPPMvr/+UrNI2jdp7RKOJ83TDbSBhPYiaJJtJqOLVoKCgxillmGCeG7UnCbm6YT5LhRyWGygWEEAggjQZK2841idUoKcmsQnYusK46rFbDrrfD8zjRQ3GRRivBdJZA3zOeRKSp4aGn/xw//Np/wvc9O/OUNDHMxjFSCkZWDfOWGNaNJ9IKKQWzRBMbxSwdxmOSWoQAJQUbiSZPDfkoYm8SsTmKMVKwM0145Y1Tbq1axP9667wHqDpPdAGC1gUireh8QCuBDz3fu33GnfOOq/OUSElq5/F9z1/6y/+EL/3Hv8ey7ZjHEZGSbOURVedRUqCVpO97qsZjjRzkoBJUrafxgdxqpBDEVnJ03iCALNJ0rmc+siyKYRRbHxDPfu6Pexd6jk9KHr5vg4OTgnluefuo4PJ2zum6YW+W8oMfHpNlloMbCybjmNEoYmee8ld+8h4+/hf+AZd++imsVcznCffsjDhc1QA8uDvmxnFBUbVM8oiq9VgtuX5lwte/fZN8FBFHikeuTPnmd26ilGAyS7hz65wnHt3jpTdPefzaNo/t58jTVcPJaclq1XBnWWGU4HBRoZTkrVsrvA/cOCloGsftwzVJYul7uPn2ipdfO2HZdlz66ae49V9/j8gqmtoRW0VddqwWNSerGqslVdnhQ0/bOiItOVl3aC3pWkd5wURt6zk9q5jnEVlmCX0PPXz/jVMaH5Dbs4R7Lo25994ps8xitWQ2itFWMpnEmAuwKSXZ3szonKfve65cmXD1gQ3mcYS1inc88xyvfvXLCCHoXEApycY8YZwaOh9oW48AQugpW09kFUXR4n3PKIugByHAGMVZ0SIEdG7g+3fdMxucxaJsuXNWUtYdd5Y1Ryclp6sa1wVWq4bz1eAO7r93itKSna0crQdBsipaIiWZzxOMkbzr48/zv7/0RU7XDaHvKYpBTWkpSBJDZBQh/NjCcHe1+z7Q+UCWWSKruLyRMhrHZLEmzSxvHK45Lhw6MYpOisGKeM9sluB9T9N65rOE0ENqFVd3R0weVLx6WBAZxSTRjKxiK4+4Z2dEbBWdC2z91b/IN//df+DaR5+jbf1dH6aNQklBnlnWZctDmzEv31Q0dYdViizWXLk0YlV1zPNh1CaJZmscszdNeNdOhj48LlFK0LaDFVl3HnfBeV3rMFaxPA9ERnHHSN46LhgnhsV6oKfqHZ7DVU1ddiglCX3PtY8+xyv/+cs8+LPPghA0tWOxrMkzw+FhgbWKw3XH0WHBedEO9wOOzypWq5r9jYzby5JpZjk5b6CH9V6K9D4Msi70eBcQcii8v1DqdeWoK3d312eRJrX6gtYkSgqAix+r775+8Gef5Ue//5Xh5CLNKLcIBFluiWKNCzDfTBnnlulGwiyPMHaw/lIKrJKUrSP0Pa0PaCHR040E5wJxashjwzSzvHnnnEvzlFXVsTtNWFeOnXHEhUkYVug0Zt0M1uTB3TEnqWWcGpp8aD1CMPnEn+e7v/UFfuFXfpHDZc3lecotJYitYp5q9ucZANvjhL1pTOs8WWJ4cHNQZjujYT3fOimxSqKNkgPyWo9WgpunJXlqefPtc65cGnFwUhBrxUnRIS5Eye4soRCe2Cj6vufGcYHVksNljZYC5wJN7bCR5hd+5Rf5zX/2Oa4//zyJVZyuarSWnJY5r91YUpYtde2Gz69qmtpxsGg4XFaE0PPG0ZqH9saDFT89KdEXm+VMNHjfU5ctXee5dVzQh55VV6OkwGjJat3Q+kBy0a6q8RRVy/EFTyaJQRvFYlkzyi2Hy/quRdI//3OcnFaMRxEu9JyeltStJ4o0txcVx3fWrNYNu/OUk2WNUZKmcbx++5zXN2J0mlvGmaVo3DCPkaasHedVN7gHMdDM1d0RWg3zOU4ts8wwSzTWSCZ5RJ5aBBDdRb1BILg8T0msQv/8z/G93/4drn30Ofq+5/ayJssscRxIMjOMW9FirML7nkkeDdoiNWyNYx7ezNBl0dHU7i7IluuGtvF4PzCCMYq2dZxMEsrGcbSsWRQti7XhllE8dXWbqvW0rSNcgDLPLIeHBVluuaUEp6uak9PqLktcefIZ1AWQF4vyLrjbxrFet1gjWa5qqlZT1I7Q1xysKmQIYdgqZXf3ZlGs6bpAFGtspIhijZKCrUnCOLVMUsvONOW+rWzItLRkPo7JUst0HFM3DmuHMYntYBDHowit5V0Br+SAlTSLsFazPU0wZjCMWWTIIsPmOEYA92xmzBOLfvyRXVoXcD4QW8Xu2HJWeYwUVF1gK9N0occHODgt77Z1NzcAVK3n+pUJJ+uOPauQAh7ajDlcdwM9pZrTMseFofVKCtSf+mv8xj/9t7zwqy/SuYDWkuuXUl6ZpZS140PXNjgqWkbx4Kpd6Blbg37t9gopBFXdEUWaV24O/FnXjjjWvNwPLnS5rJlNE15944w40cwnCZPU8sT+jK9/+yZaS4qiZb6Z8fJNxdFhwXwzZX+e8dqNJaen5eDVWo8Q8MKvvsjn//Fn2f/g02xvZ7Sd5/svH+Jc4KxoOF5UPHLfBt996ZD3PLzNUVWj79xe340dk0TT98Ps1rUjScxgk2vHu69t0QN15wfnqiV158itJh9FdK27GzU1dcf5hRgBBnpqPXEcWCxK0mzIdvc/+DQ3/uBr2I88y0FSDNfWjtRqjNWUzUB/bx6teexKjs5zezd2HE9immZQVUJAkhmUkuTjnmkeUTYdo8RglCSN9N1MNY4UIQSmkwjfB6wa9MB0I2F7nFDXbkgMMzOkiFajtWR7O8NeWKRLn/kks3kKwHwccV4P7iXLDIlVw8w+cHmCkoK+74mtpnUe53uazhNbResCdeu5th1TNJaDSJNoSeUCG4kmtpJHrkxZlB30DOop1giGQGRvGmO15PaiYnea4F1ge5pw/VJK23kOkoJLn/kk//3f/wZP/dKnkUIwiRS704SNzKDViEgrIiXRZ0WDFIKzZc3lrZzyImWpO4/rhkinaTxf+KMbGKNYnw9RkRCCPDV8+MFNvvmdm3dnMcssVy6NOD6rWBYNrRuEzvGdNeuipW0cb3eBV2Yp33/5EIDZPOWpX/o0v/dvfo2tn3oSHwK+C1zdn/DqwYJ7dkbcKhL0zZvnCDmk0T1Qld2wmeqO4HvieAiA9y6N6PwQSXbdIKS7aEiklRquN0ZRVR2rqmO1qjFGkSWGpnas1g3GKtbrljgeFo9zgfKC46UQbP3Ukxz9j29w/foLLJqapgu4LnB83lC1Af3+9+yxkWrOKsc01hwXHVoJ3j4t2Z9nHC5rLk1jFmXH/izmWz86ZXsSk0aavUlEFmkms4QHrkw5K1oub6TMc8v+RoaUggc3Ew4Wwwr1vscaSRYZPnRtg7OiIbWa+ThiEil8CFy//gJ/+LnP877PfBKrJZd3ct730AbX5jn6cFmxLBXLomU9ilmVLS70w7bSNUerYUe/dbymaBxnZxVF2ZIkQ57wMw9scefWOeusQQi4CfQ93F4OSklJweGy4mRZM8kjlquaMvIcFS3HiwpjNef1oO58F1g0Ne+7mOEPvfgpzpY1p6Wj8QE9TizpRRAxS80FsodiY6PYNxmT1PDo/i5aCTbyCKsl27nGSMF8ZHni0T1C39O5AVyTRDPNLGXr2BkNCbpRcggzWs3mOGYUKx65b2OgJ63YyAxX9yc0XcBqyYde/BRf/+yv88wvf5qyDYytRq+qltN1Q9E4umnC6UUmVbWe2Ay5adNFvHxzySjWHC1rpBIkVrMzTfiz93W89ObpXcOXZpatcczJ+eDDjJa8cbSmaRzr1FDUjrdPSkaR4rsvHWIjTXaB+lcPFrgucHkn52xZ88wvf5qv/utf41N/50VulzXqvo985u8vyxZ5ofh//IfF7jTheNVwz+aQHbz/HXNuntU8dHmCFIIsMrz0+gkf+4l9jjrP0brh0QfmrCvH/Vs5PgyFroqWe3dy1o1jexLTuMADuyMiI5lNEirnSSPNPI/RWuKF4APv3GR7lpJEhkfe9xi//o8+y7WffAzxm9+50fu+H9DdB2KlOG8d22nEUdmwlUas2o6i9bx+0nDvLOK46Mis4taq5RPv3uPlkxWND7QucFw43rWTse4cWkiskgjg9bOKhzczDlYV88QytoajqqZygXliiZTkVlFTtYFr85zGD62/Xda8dFjyz//2v+L/A6Sq49DkoH8lAAAAAElFTkSuQmCC","theme":null,"options":{"xaxis_height":80,"yaxis_width":120,"xaxis_font_size":null,"yaxis_font_size":null,"brush_color":"#0000FF","show_grid":false,"anim_duration":500,"yclust_width":0,"xclust_height":0}},"evals":[],"jsHooks":[]}</script>
<p><br></p>
<p>We can already begin to see the clusters of documents. For example, the more historical are the clump in the upper left. The oddball is <a href="https://en.wikipedia.org/wiki/The_Phoenix_and_the_Turtle"><em>The Phoenix and the Turtle</em></a>, though <em>Lover’s Complaint</em> and the <em>Elegy</em> are also less similar than standard Shakespeare. The Phoenix and the Turtle is about the death of ideal love, represented by the Phoenix and Turtledove, for which there is a funeral. It actually is considered by scholars to be in stark contrast to his other output. Elegy itself is actually written for a funeral. <a href="https://en.wikipedia.org/wiki/A_Lover%27s_Complaint"><em>A Lover’s Complaint</em></a> is considered an inferior work by the Bard, so perhaps what we’re seeing is a reflection of that lack of quality. In general, we’re seeing things that we might expect.</p>
</div>
<div id="readability" class="section level4">
<h4>Readability</h4>
<p>We can examine readability scores for the texts, but for this we’ll need them in raw form. We already had them from before, I just added <em>Phoenix</em> from the Gutenberg download.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">raw_texts</code></pre></div>
<pre><code># A tibble: 43 x 2
                              id           text
                           &lt;chr&gt;         &lt;list&gt;
 1       A_Lover_s_Complaint.txt    &lt;chr [813]&gt;
 2 A_Midsummer_Night_s_Dream.txt  &lt;chr [6,630]&gt;
 3 All_s_Well_That_Ends_Well.txt &lt;chr [10,993]&gt;
 4      Antony_and_Cleopatra.txt &lt;chr [14,064]&gt;
 5            As_You_Like_It.txt  &lt;chr [9,706]&gt;
 6                Coriolanus.txt &lt;chr [13,440]&gt;
 7                 Cymbeline.txt &lt;chr [11,388]&gt;
 8                     Elegy.txt  &lt;chr [1,316]&gt;
 9                    Hamlet.txt &lt;chr [13,950]&gt;
10                   Henry_V.txt  &lt;chr [9,777]&gt;
# ... with 33 more rows</code></pre>
<p>With raw texts, we need to make them an official <span class="objclass">corpus</span> object to proceed more easily. The <span class="func">corpus</span> function from <span class="pack">quanteda</span> won’t read directly from a list column or a list at all, so we’ll convert it via the <span class="pack">tm</span> package, which more or less defeats the purpose of using the <span class="pack">quanteda</span> package except that the <span class="func">textstat_readability</span> function gives us what we want, but I digress.</p>
<p>Unfortunately the concept of <span class="emph">readability</span> is ill-defined, and as such, there are dozens of measures available dating back nearly 75 years. The following is based on the Coleman-Liau grade score (higher grade = more difficult). The conclusion here is first, Shakespeare isn’t exactly a difficult read, and two, the poems may be more so relative to the other works.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tm)
raw_text_corpus =<span class="st"> </span><span class="kw">corpus</span>(<span class="kw">VCorpus</span>(<span class="kw">VectorSource</span>(raw_texts$text)))
shakes_read =<span class="st"> </span><span class="kw">textstat_readability</span>(raw_text_corpus) </code></pre></div>
<div id="323c60681614" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="323c60681614">{"x":{"data":[{"colorbar":{"ticklen":2,"lenmode":"fraction","xanchor":"left","x":0.65,"y":0.25,"yanchor":"bottom","len":0.5},"colorscale":[["0","rgba(247,251,255,1)"],["0.102941176470588","rgba(226,238,248,1)"],["0.176470588235294","rgba(212,228,244,1)"],["0.264705882352941","rgba(193,217,237,1)"],["0.272058823529412","rgba(191,216,237,1)"],["0.323529411764706","rgba(175,209,231,1)"],["0.382352941176471","rgba(155,200,224,1)"],["0.389705882352941","rgba(152,199,224,1)"],["0.411764705882353","rgba(144,194,222,1)"],["0.441176470588235","rgba(132,187,219,1)"],["0.5","rgba(107,174,214,1)"],["0.529411764705882","rgba(98,167,210,1)"],["0.544117647058823","rgba(94,164,208,1)"],["0.588235294117647","rgba(79,154,203,1)"],["0.691176470588235","rgba(50,128,189,1)"],["0.808823529411765","rgba(24,98,169,1)"],["0.948529411764706","rgba(9,61,127,1)"],["1","rgba(8,48,107,1)"]],"showscale":true,"z":[[9.2],[9.1],[9],[8.8],[8.3],[8.2],[8],[7.8],[7.8],[7.6],[7.6],[7.6],[7.6],[7.6],[7.5],[7.5],[7.5],[7.3],[7.3],[7.3],[7.3],[7.2],[7.2],[7.1],[7.1],[7.1],[6.9],[6.9],[6.9],[6.8],[6.7],[6.7],[6.7],[6.7],[6.7],[6.7],[6.4],[6.4],[6.4],[6.4],[6.2],[6],[5.8]],"x":[1],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"showlegend":false,"type":"heatmap","xaxis":"x","yaxis":"y","frame":null}],"layout":{"xaxis":{"domain":[0.375,0.625],"tickfont":{"size":10},"tickangle":45,"tickvals":[1],"ticktext":["Coleman.Liau.grade"],"linecolor":"#ffffff","range":[0.5,1.5],"showticklabels":true,"title":"","anchor":"y","zeroline":false,"showgrid":false},"yaxis":{"domain":[0,1],"tickfont":{"size":10},"tickangle":0,"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"ticktext":["Elegy","The_Rape_of_Lucrece","A_Lover_s_Complaint","The_Phoenix_and_the_Turtle","Henry_VI_Part_1","Venus_and_Adonis","Sonnets","Titus_Andronicus","Richard_II","Henry_VIII","Richard_III","Antony_and_Cleopatra","King_John","Henry_VI_Part_3","Henry_V","Henry_VI_Part_2","Coriolanus","Macbeth","Troilus_and_Cressida","Timon_of_Athens","Cymbeline","Pericles_Prince_of_Tyre","The_Tempest","King_Henry_IV_Part_2","Hamlet","The_Winter_s_Tale","Love_s_Labour_s_Lost","Measure_for_Measure","A_Midsummer_Night_s_Dream","King_Henry_IV_Part_1","All_s_Well_That_Ends_Well","King_Lear","The_Taming_of_the_Shrew","The_Comedy_of_Errors","Julius_Caesar","The_Merchant_of_Venice","As_You_Like_It","Romeo_and_Juliet","The_Two_Gentlemen_of_Verona","Othello","Much_Ado_about_Nothing","The_Merry_Wives_of_Windsor","Twelfth_Night"],"linecolor":"#ffffff","range":[0.5,43.5],"showticklabels":true,"title":"","anchor":"x","ticklen":0,"zeroline":false,"showgrid":false},"margin":{"b":108,"l":162,"t":0,"r":null},"hovermode":"closest","showlegend":false,"title":"","legend":{"y":1,"yanchor":"top"},"plot_bgcolor":"transparent","paper_bgcolor":"transparent"},"attrs":{"323c64d56e22":{"z":[[9.2],[9.1],[9],[8.8],[8.3],[8.2],[8],[7.8],[7.8],[7.6],[7.6],[7.6],[7.6],[7.6],[7.5],[7.5],[7.5],[7.3],[7.3],[7.3],[7.3],[7.2],[7.2],[7.1],[7.1],[7.1],[6.9],[6.9],[6.9],[6.8],[6.7],[6.7],[6.7],[6.7],[6.7],[6.7],[6.4],[6.4],[6.4],[6.4],[6.2],[6],[5.8]],"x":1,"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"showlegend":false,"zmin":null,"zmax":null,"colors":"Blues","alpha":1,"sizes":[10,100],"type":"heatmap"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false,"displaylogo":false,"modeBarButtonsToRemove":["pan2d"],"showLink":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"subplot":true,"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
</div>
<div id="lexical-diversity" class="section level4">
<h4>Lexical diversity</h4>
<p>There are also metrics of <span class="emph">lexical diversity</span>. As with readability, there is no one way to measure ‘diversity’. Here we’ll go back to using the standard DTM, as the focus is on the terms, whereas readability is more at the sentence level. Most standard measures of lexical diversity are variants on what is called the type-token ratio, which in our setting is the number of unique terms (types) relative to the total terms (tokens). We can use <span class="func">textstat_lexdiv</span> for our purposes here, which will provide several measures of diversity by default.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ld =<span class="st"> </span><span class="kw">textstat_lexdiv</span>(shakes_dtm)</code></pre></div>
<p>This visual is based on the (absolute) scaled values of those several metrics, and might suggest that the poems are relatively more diverse. This certainly might be the case for <em>Phoenix</em>, but it could also be a reflection of the limitation of several of the measures, such that longer works are seen as less diverse, as tokens are added more so than types the longer the text goes.</p>
<div id="323c20e7134f" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="323c20e7134f">{"x":{"data":[{"colorbar":{"ticklen":2,"lenmode":"fraction","xanchor":"left","x":1.1,"y":0,"yanchor":"bottom","len":0.3},"colorscale":[["0","rgba(247,251,255,1)"],["0.00408024779278684","rgba(246,250,255,1)"],["0.00869770269318374","rgba(245,250,254,1)"],["0.0145056787785578","rgba(244,249,254,1)"],["0.0212593497759772","rgba(243,248,254,1)"],["0.0257660624259586","rgba(242,248,253,1)"],["0.029118775870594","rgba(241,247,253,1)"],["0.0336971760520819","rgba(240,247,253,1)"],["0.0372029632395839","rgba(240,246,253,1)"],["0.0416965579220965","rgba(239,246,252,1)"],["0.0466321597307054","rgba(238,245,252,1)"],["0.0555944265493658","rgba(236,244,251,1)"],["0.0651872244676767","rgba(234,243,251,1)"],["0.0703981539709269","rgba(233,242,250,1)"],["0.0793263391119209","rgba(231,241,250,1)"],["0.0885212050477878","rgba(229,240,249,1)"],["0.0969081743939657","rgba(228,239,249,1)"],["0.102292873676559","rgba(227,238,248,1)"],["0.11347790260044","rgba(224,236,248,1)"],["0.126968265245202","rgba(222,235,247,1)"],["0.144976758475931","rgba(218,232,246,1)"],["0.16973222518767","rgba(213,229,244,1)"],["0.220199137518351","rgba(204,223,241,1)"],["0.373140004092113","rgba(159,202,225,1)"],["1","rgba(8,48,107,1)"]],"showscale":false,"z":[[3.8585368434728,3.85626758728628,2.60181829025916,2.60181829025916,5.07926709270428,4.17077644711093,4.46178478386743,5.28899975510343,5.28899975510345],[4.27373424383761,3.89470284405509,4.73888321623461,4.73888321623461,3.20102405535595,3.29708466746214,3.35857059077572,0.923650838178983,0.923650838178974],[1.84068000784852,1.97558366419337,1.22339502646669,1.22339502646669,1.22519290280707,1.95158303867622,1.67719225751969,1.39316755909095,1.39316755909093],[0.916515646519022,1.2310887522139,0.117234952323397,0.117234952323396,0.732438703992102,1.31420660781576,1.08849656389393,1.07928846124081,1.07928846124081],[0.406951135281428,0.646632555554767,0.77468533056333,0.77468533056333,0.622999267415118,0.906072259367266,0.883772905930921,1.17992950727334,1.17992950727334],[0.506793969475823,0.721997354710079,0.49309073315617,0.49309073315617,0.601241957240749,0.903394003371895,0.844033893278031,1.02773126882923,1.02773126882921],[0.633724939985228,0.837809904486943,0.201229373839116,0.201229373839116,0.596410525462254,0.94330779296603,0.83525153595396,0.902442254849039,0.90244225484903],[0.360423398284364,0.528116482341248,0.529545524186343,0.529545524186343,0.523735635218552,0.713102701735863,0.70495619383892,0.922059282676811,0.922059282676817],[0.628983203548833,0.818984072565648,0.143232561438991,0.143232561438992,0.578480212599676,0.909323262869449,0.802791179331318,0.851760024814022,0.851760024814021],[0.17195224300904,0.073335255823553,1.46921649852947,1.46921649852947,0.137732754237553,0.336626706867002,0.344844143086938,0.833847172073559,0.833847172073577],[0.637376304864003,0.799309354309599,0.0109546217565785,0.0109546217565776,0.543537920955818,0.850801702359745,0.740126194593955,0.737648812255875,0.737648812255875],[0.30448759740084,0.104509109154917,1.41773189921712,1.41773189921712,0.0253071398286616,0.14475123220347,0.181833846435249,0.642278268860085,0.642278268860079],[0.459190926379477,0.576948177864575,0.116486294869384,0.116486294869384,0.46940617557993,0.655779270917054,0.609711770696317,0.671599497176404,0.67159949717641],[0.0985104126345269,0.190967586339296,0.590204566425549,0.590204566425551,0.374292626097179,0.374915495075537,0.447231479556387,0.714130183882719,0.714130183882717],[0.213753724805706,0.408978026034372,0.519434584408345,0.519434584408345,0.189563903657894,0.520771910857322,0.41812615922606,0.591314615172879,0.591314615172864],[0.449720046230264,0.544216121316965,0.0174423090892881,0.0174423090892893,0.436913016985298,0.597879099888639,0.553604479217468,0.582607559946734,0.582607559946725],[0.336774492954419,0.422904020200638,0.178312193081941,0.178312193081941,0.409378234282891,0.512044460308564,0.506549656658411,0.602200680668019,0.602200680668016],[0.467872394965562,0.511218022616419,0.283623377954266,0.283623377954266,0.369262081025081,0.493840950516676,0.438784560725978,0.363682125589273,0.363682125589272],[0.492181913282936,0.499832822358193,0.527137500960537,0.527137500960537,0.322917708430586,0.428946753636263,0.361640563463288,0.202875497419218,0.202875497419221],[0.246989633512481,0.425723904861864,0.372404363723253,0.372404363723253,0.173303230070671,0.509914982050265,0.395259710796653,0.512613900520186,0.512613900520181],[0.467768908958212,0.479947747025714,0.453022511428998,0.453022511428998,0.325811229284369,0.424555650076746,0.366421795719503,0.234043004489325,0.234043004489316],[0.471762001326631,0.608695690736593,0.154080786813327,0.154080786813327,0.195115389662938,0.5992579770992,0.425907209765006,0.345054294845723,0.345054294845725],[0.432846355215147,0.419232294409689,0.527969670603355,0.527969670603355,0.283942578694419,0.346483232967449,0.297688876261099,0.141791386834186,0.141791386834177],[0.356391193984891,0.259282304965124,0.865461635916546,0.865461635916547,0.147152288069705,0.114320444111026,0.079662453632375,0.18985823686591,0.189858236865925],[0.368843368953774,0.406384632607159,0.127900727205239,0.127900727205239,0.346379320199818,0.421587774493941,0.400543145648127,0.386094294482624,0.386094294482618],[0.394475192570765,0.342414091571477,0.672747612443163,0.672747612443163,0.221660393093424,0.237808858113387,0.197202100849619,0.00670528698452802,0.00670528698453184],[0.260411369758202,0.152046763136213,0.751164595670773,0.751164595670773,0.10873917210058,0.0260241148390116,0.0201659285728581,0.210258040539135,0.210258040539143],[0.349384886065226,0.30542478903132,0.539346930741089,0.539346930741088,0.225195342286176,0.227237666038412,0.202850194710277,0.0460752415360924,0.046075241536099],[0.166631573698828,0.160928989480216,0.537677289649493,0.537677289649494,0.172153379143864,0.0172327016791365,0.118784729523696,0.37763776313962,0.377637763139631],[0.145856213112077,0.00949383402097829,0.716361959473707,0.716361959473707,0.0349928577923325,0.115446986681879,0.0920249406547227,0.313009366142717,0.313009366142711],[0.223655105512401,0.243639242687014,0.0331449012842194,0.0331449012842196,0.294484091778037,0.289977525347768,0.314903470886756,0.366493276111371,0.366493276111364],[0.154640786792248,0.0332504054269799,0.641045391593577,0.641045391593579,0.0614704791545939,0.0758367786232724,0.0520471032767025,0.245298502856992,0.245298502856979],[0.258924318742287,0.178272385673075,0.584125740436359,0.584125740436358,0.151134438205369,0.0865760653984505,0.0858725821959133,0.0853989383534386,0.0853989383534442],[0.284584905275893,0.229855653777495,0.480925141076714,0.480925141076714,0.196108165511535,0.161365559781106,0.15656961439947,0.0216538641688122,0.0216538641688127],[0.106984230364346,0.234747030096491,0.265072382981145,0.265072382981146,0.0299389828900138,0.28268869883571,0.188662429740806,0.251133641820088,0.251133641820095],[0.220717345101425,0.19501581405316,0.206165724408814,0.206165724408814,0.225989380757796,0.184369898909162,0.204119803132895,0.16894843306796,0.168948433067971],[0.162387492711746,0.152067784198034,0.0257638365955897,0.0257638365955911,0.236067544978421,0.180186745389993,0.220262946995874,0.252790122443194,0.252790122443197],[0.0887039020150649,0.202489419957191,0.210738307847212,0.210738307847212,7.37354509121025e-005,0.236722693237862,0.144239547273408,0.184312739430741,0.184312739430749],[0.0132352143282734,0.0894838026467112,0.300297512787732,0.300297512787731,0.051135596861899,0.13535980429813,0.067691410955568,0.138309293673506,0.138309293673497],[0.118177582495557,0.0882927566756185,0.0594464409417251,0.0594464409417252,0.195674165768988,0.105334607169867,0.155882415072109,0.176982132621356,0.176982132621348],[0.131327262861018,0.0545352478914456,0.341050860464808,0.341050860464807,0.126022559259571,0.00797707391776426,0.0468443000019536,0.0367682332009213,0.0367682332009186],[0.0502963424468705,0.00873210180363125,0.111609073407445,0.111609073407444,0.132316273279407,0.00893565639616303,0.0565961264364304,0.0585126842507116,0.0585126842506954],[0.00239369118020184,0.0440217662083744,0.0302555528925488,0.0302555528925492,0.138928394258589,0.0144292953042149,0.0668626721961459,0.123001323947068,0.123001323947075]],"x":[1,2,3,4,5,6,7,8,9],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"showlegend":false,"type":"heatmap","xaxis":"x","yaxis":"y","frame":null}],"layout":{"xaxis":{"domain":[0.25,0.75],"tickfont":{"size":10},"tickangle":45,"tickvals":[1,2,3,4,5,6,7,8,9],"ticktext":["TTR","C","R","CTTR","U","S","Maas","lgV0","lgeV0"],"linecolor":"#ffffff","range":[0.5,9.5],"showticklabels":true,"title":"","anchor":"y","zeroline":false,"showgrid":false},"yaxis":{"domain":[0,1],"tickfont":{"size":10},"tickangle":0,"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"ticktext":["A_Lover_s_Complaint","The_Phoenix_and_the_Turtle","Elegy","Richard_III","Julius_Caesar","Sonnets","Henry_VI_Part_3","Much_Ado_about_Nothing","Richard_II","Henry_V","Romeo_and_Juliet","Hamlet","Titus_Andronicus","The_Two_Gentlemen_of_Verona","Macbeth","Henry_VIII","The_Merchant_of_Venice","Othello","Cymbeline","The_Tempest","Coriolanus","Venus_and_Adonis","Henry_VI_Part_2","Troilus_and_Cressida","King_John","King_Lear","King_Henry_IV_Part_2","King_Henry_IV_Part_1","The_Comedy_of_Errors","Henry_VI_Part_1","As_You_Like_It","The_Winter_s_Tale","Antony_and_Cleopatra","Love_s_Labour_s_Lost","Twelfth_Night","All_s_Well_That_Ends_Well","Measure_for_Measure","Pericles_Prince_of_Tyre","The_Merry_Wives_of_Windsor","The_Taming_of_the_Shrew","The_Rape_of_Lucrece","Timon_of_Athens","A_Midsummer_Night_s_Dream"],"linecolor":"#ffffff","range":[0.5,43.5],"showticklabels":true,"title":"","anchor":"x","ticklen":0,"zeroline":false,"showgrid":false},"margin":{"b":30,"l":162,"t":0,"r":null},"hovermode":"closest","showlegend":false,"title":"","legend":{"y":1,"yanchor":"top"},"plot_bgcolor":"transparent","paper_bgcolor":"transparent"},"attrs":{"323c32f626ba":{"z":[[3.8585368434728,3.85626758728628,2.60181829025916,2.60181829025916,5.07926709270428,4.17077644711093,4.46178478386743,5.28899975510343,5.28899975510345],[4.27373424383761,3.89470284405509,4.73888321623461,4.73888321623461,3.20102405535595,3.29708466746214,3.35857059077572,0.923650838178983,0.923650838178974],[1.84068000784852,1.97558366419337,1.22339502646669,1.22339502646669,1.22519290280707,1.95158303867622,1.67719225751969,1.39316755909095,1.39316755909093],[0.916515646519022,1.2310887522139,0.117234952323397,0.117234952323396,0.732438703992102,1.31420660781576,1.08849656389393,1.07928846124081,1.07928846124081],[0.406951135281428,0.646632555554767,0.77468533056333,0.77468533056333,0.622999267415118,0.906072259367266,0.883772905930921,1.17992950727334,1.17992950727334],[0.506793969475823,0.721997354710079,0.49309073315617,0.49309073315617,0.601241957240749,0.903394003371895,0.844033893278031,1.02773126882923,1.02773126882921],[0.633724939985228,0.837809904486943,0.201229373839116,0.201229373839116,0.596410525462254,0.94330779296603,0.83525153595396,0.902442254849039,0.90244225484903],[0.360423398284364,0.528116482341248,0.529545524186343,0.529545524186343,0.523735635218552,0.713102701735863,0.70495619383892,0.922059282676811,0.922059282676817],[0.628983203548833,0.818984072565648,0.143232561438991,0.143232561438992,0.578480212599676,0.909323262869449,0.802791179331318,0.851760024814022,0.851760024814021],[0.17195224300904,0.073335255823553,1.46921649852947,1.46921649852947,0.137732754237553,0.336626706867002,0.344844143086938,0.833847172073559,0.833847172073577],[0.637376304864003,0.799309354309599,0.0109546217565785,0.0109546217565776,0.543537920955818,0.850801702359745,0.740126194593955,0.737648812255875,0.737648812255875],[0.30448759740084,0.104509109154917,1.41773189921712,1.41773189921712,0.0253071398286616,0.14475123220347,0.181833846435249,0.642278268860085,0.642278268860079],[0.459190926379477,0.576948177864575,0.116486294869384,0.116486294869384,0.46940617557993,0.655779270917054,0.609711770696317,0.671599497176404,0.67159949717641],[0.0985104126345269,0.190967586339296,0.590204566425549,0.590204566425551,0.374292626097179,0.374915495075537,0.447231479556387,0.714130183882719,0.714130183882717],[0.213753724805706,0.408978026034372,0.519434584408345,0.519434584408345,0.189563903657894,0.520771910857322,0.41812615922606,0.591314615172879,0.591314615172864],[0.449720046230264,0.544216121316965,0.0174423090892881,0.0174423090892893,0.436913016985298,0.597879099888639,0.553604479217468,0.582607559946734,0.582607559946725],[0.336774492954419,0.422904020200638,0.178312193081941,0.178312193081941,0.409378234282891,0.512044460308564,0.506549656658411,0.602200680668019,0.602200680668016],[0.467872394965562,0.511218022616419,0.283623377954266,0.283623377954266,0.369262081025081,0.493840950516676,0.438784560725978,0.363682125589273,0.363682125589272],[0.492181913282936,0.499832822358193,0.527137500960537,0.527137500960537,0.322917708430586,0.428946753636263,0.361640563463288,0.202875497419218,0.202875497419221],[0.246989633512481,0.425723904861864,0.372404363723253,0.372404363723253,0.173303230070671,0.509914982050265,0.395259710796653,0.512613900520186,0.512613900520181],[0.467768908958212,0.479947747025714,0.453022511428998,0.453022511428998,0.325811229284369,0.424555650076746,0.366421795719503,0.234043004489325,0.234043004489316],[0.471762001326631,0.608695690736593,0.154080786813327,0.154080786813327,0.195115389662938,0.5992579770992,0.425907209765006,0.345054294845723,0.345054294845725],[0.432846355215147,0.419232294409689,0.527969670603355,0.527969670603355,0.283942578694419,0.346483232967449,0.297688876261099,0.141791386834186,0.141791386834177],[0.356391193984891,0.259282304965124,0.865461635916546,0.865461635916547,0.147152288069705,0.114320444111026,0.079662453632375,0.18985823686591,0.189858236865925],[0.368843368953774,0.406384632607159,0.127900727205239,0.127900727205239,0.346379320199818,0.421587774493941,0.400543145648127,0.386094294482624,0.386094294482618],[0.394475192570765,0.342414091571477,0.672747612443163,0.672747612443163,0.221660393093424,0.237808858113387,0.197202100849619,0.00670528698452802,0.00670528698453184],[0.260411369758202,0.152046763136213,0.751164595670773,0.751164595670773,0.10873917210058,0.0260241148390116,0.0201659285728581,0.210258040539135,0.210258040539143],[0.349384886065226,0.30542478903132,0.539346930741089,0.539346930741088,0.225195342286176,0.227237666038412,0.202850194710277,0.0460752415360924,0.046075241536099],[0.166631573698828,0.160928989480216,0.537677289649493,0.537677289649494,0.172153379143864,0.0172327016791365,0.118784729523696,0.37763776313962,0.377637763139631],[0.145856213112077,0.00949383402097829,0.716361959473707,0.716361959473707,0.0349928577923325,0.115446986681879,0.0920249406547227,0.313009366142717,0.313009366142711],[0.223655105512401,0.243639242687014,0.0331449012842194,0.0331449012842196,0.294484091778037,0.289977525347768,0.314903470886756,0.366493276111371,0.366493276111364],[0.154640786792248,0.0332504054269799,0.641045391593577,0.641045391593579,0.0614704791545939,0.0758367786232724,0.0520471032767025,0.245298502856992,0.245298502856979],[0.258924318742287,0.178272385673075,0.584125740436359,0.584125740436358,0.151134438205369,0.0865760653984505,0.0858725821959133,0.0853989383534386,0.0853989383534442],[0.284584905275893,0.229855653777495,0.480925141076714,0.480925141076714,0.196108165511535,0.161365559781106,0.15656961439947,0.0216538641688122,0.0216538641688127],[0.106984230364346,0.234747030096491,0.265072382981145,0.265072382981146,0.0299389828900138,0.28268869883571,0.188662429740806,0.251133641820088,0.251133641820095],[0.220717345101425,0.19501581405316,0.206165724408814,0.206165724408814,0.225989380757796,0.184369898909162,0.204119803132895,0.16894843306796,0.168948433067971],[0.162387492711746,0.152067784198034,0.0257638365955897,0.0257638365955911,0.236067544978421,0.180186745389993,0.220262946995874,0.252790122443194,0.252790122443197],[0.0887039020150649,0.202489419957191,0.210738307847212,0.210738307847212,7.37354509121025e-005,0.236722693237862,0.144239547273408,0.184312739430741,0.184312739430749],[0.0132352143282734,0.0894838026467112,0.300297512787732,0.300297512787731,0.051135596861899,0.13535980429813,0.067691410955568,0.138309293673506,0.138309293673497],[0.118177582495557,0.0882927566756185,0.0594464409417251,0.0594464409417252,0.195674165768988,0.105334607169867,0.155882415072109,0.176982132621356,0.176982132621348],[0.131327262861018,0.0545352478914456,0.341050860464808,0.341050860464807,0.126022559259571,0.00797707391776426,0.0468443000019536,0.0367682332009213,0.0367682332009186],[0.0502963424468705,0.00873210180363125,0.111609073407445,0.111609073407444,0.132316273279407,0.00893565639616303,0.0565961264364304,0.0585126842507116,0.0585126842506954],[0.00239369118020184,0.0440217662083744,0.0302555528925488,0.0302555528925492,0.138928394258589,0.0144292953042149,0.0668626721961459,0.123001323947068,0.123001323947075]],"x":[1,2,3,4,5,6,7,8,9],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"showlegend":false,"zmin":null,"zmax":null,"colors":"Blues","alpha":1,"sizes":[10,100],"type":"heatmap"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false,"displaylogo":false,"modeBarButtonsToRemove":["pan2d"],"showLink":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"subplot":true,"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p><br> As a comparison, the following shows the results of the ‘Measure of Textual Diversity’ calculated using the <span class="pack">koRpus</span> package<a href="#fn12" class="footnoteRef" id="fnref12"><sup>12</sup></a>. It is notably less affected by text length, though the conclusions are largely the same. There is notable correlation between the MTLD and readability as well<a href="#fn13" class="footnoteRef" id="fnref13"><sup>13</sup></a>. In general, Shakespeare tends to be more expressive in poems, and less so with comedies.</p>
<div id="323c34cf2728" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="323c34cf2728">{"x":{"data":[{"colorbar":{"ticklen":2,"lenmode":"fraction","xanchor":"left","x":1.1,"y":0,"yanchor":"bottom","len":0.3},"colorscale":[["0","rgba(247,251,255,1)"],["0.0303337670381906","rgba(241,247,253,1)"],["0.0747262962918928","rgba(232,241,250,1)"],["0.114910031043947","rgba(224,236,248,1)"],["0.149318929045305","rgba(217,232,245,1)"],["0.15098107340712","rgba(217,232,245,1)"],["0.15829973649213","rgba(216,231,245,1)"],["0.162199416575723","rgba(215,230,245,1)"],["0.171372043618753","rgba(213,229,244,1)"],["0.196485640482533","rgba(208,226,242,1)"],["0.211115335911666","rgba(205,224,241,1)"],["0.24390887520285","rgba(199,220,239,1)"],["0.350035564099143","rgba(166,205,228,1)"],["0.367099097699248","rgba(161,203,226,1)"],["0.376014873040854","rgba(158,202,225,1)"],["0.401406606189744","rgba(148,196,223,1)"],["0.429115813973313","rgba(137,190,220,1)"],["0.455862275095729","rgba(126,184,218,1)"],["0.473683552851487","rgba(119,180,216,1)"],["0.480075704549788","rgba(116,178,216,1)"],["0.481775841188187","rgba(115,178,216,1)"],["0.554471435140366","rgba(90,162,207,1)"],["0.735648147302638","rgba(38,117,183,1)"],["0.783786488782885","rgba(28,104,174,1)"],["1","rgba(8,48,107,1)"]],"showscale":false,"z":[[149.554553453586],[136.238429677652],[130.72038606075],[129.271039770434],[127.15645343937],[114.141349583829],[111.926226159086],[107.718940936864],[107.637613174592],[107.563050211968],[107.374442023127],[106.756878458309],[106.312049853429],[103.571730200775],[103.467760330516],[102.573634150739],[100.78322773874],[99.6147670015976],[98.7472035794183],[98.5168669465759],[98.2943010792646],[97.0837069528295],[88.6221806111158],[88.4809092771682],[86.9342446068918],[84.8034437124061],[84.7173830340884],[84.5990767316738],[82.6604160147371],[82.6364075216238],[81.6810919932085],[81.6121274085726],[81.5980813844128],[81.0265007415049],[80.9776079180753],[80.8800946221624],[78.7431969056225],[77.888675307471],[77.338635725648],[72.3780066194783],[71.2812219106776],[71.2545971656941],[68.8257572264028]],"x":[1],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"showlegend":false,"type":"heatmap","xaxis":"x","yaxis":"y","frame":null}],"layout":{"xaxis":{"domain":[0.25,0.75],"tickfont":{"size":10},"tickangle":45,"tickvals":[1],"ticktext":["MTLD"],"linecolor":"#ffffff","range":[0.5,1.5],"showticklabels":true,"title":"","anchor":"y","zeroline":false,"showgrid":false},"yaxis":{"domain":[0,1],"tickfont":{"size":10},"tickangle":0,"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"ticktext":["Elegy","A_Lover_s_Complaint","The_Phoenix_and_the_Turtle","Venus_and_Adonis","The_Rape_of_Lucrece","Henry_VI_Part_1","Cymbeline","Henry_VIII","Macbeth","Pericles_Prince_of_Tyre","Titus_Andronicus","Henry_VI_Part_2","The_Tempest","Antony_and_Cleopatra","Henry_VI_Part_3","King_Lear","The_Winter_s_Tale","Sonnets","King_John","Richard_II","Coriolanus","Timon_of_Athens","All_s_Well_That_Ends_Well","Hamlet","Richard_III","Measure_for_Measure","Othello","King_Henry_IV_Part_1","Henry_V","Romeo_and_Juliet","A_Midsummer_Night_s_Dream","The_Merchant_of_Venice","King_Henry_IV_Part_2","The_Taming_of_the_Shrew","Julius_Caesar","Troilus_and_Cressida","Twelfth_Night","Much_Ado_about_Nothing","Love_s_Labour_s_Lost","The_Comedy_of_Errors","The_Two_Gentlemen_of_Verona","As_You_Like_It","The_Merry_Wives_of_Windsor"],"linecolor":"#ffffff","range":[0.5,43.5],"showticklabels":true,"title":"","anchor":"x","ticklen":0,"zeroline":false,"showgrid":false},"margin":{"b":24,"l":162,"t":0,"r":null},"hovermode":"closest","showlegend":false,"title":"","legend":{"y":1,"yanchor":"top"},"plot_bgcolor":"transparent","paper_bgcolor":"transparent"},"attrs":{"323c180359a":{"z":[[149.554553453586],[136.238429677652],[130.72038606075],[129.271039770434],[127.15645343937],[114.141349583829],[111.926226159086],[107.718940936864],[107.637613174592],[107.563050211968],[107.374442023127],[106.756878458309],[106.312049853429],[103.571730200775],[103.467760330516],[102.573634150739],[100.78322773874],[99.6147670015976],[98.7472035794183],[98.5168669465759],[98.2943010792646],[97.0837069528295],[88.6221806111158],[88.4809092771682],[86.9342446068918],[84.8034437124061],[84.7173830340884],[84.5990767316738],[82.6604160147371],[82.6364075216238],[81.6810919932085],[81.6121274085726],[81.5980813844128],[81.0265007415049],[80.9776079180753],[80.8800946221624],[78.7431969056225],[77.888675307471],[77.338635725648],[72.3780066194783],[71.2812219106776],[71.2545971656941],[68.8257572264028]],"x":1,"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"showlegend":false,"zmin":null,"zmax":null,"colors":"Blues","alpha":1,"sizes":[10,100],"type":"heatmap"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false,"displaylogo":false,"modeBarButtonsToRemove":["pan2d"],"showLink":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"subplot":true,"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p><br></p>
</div>
</div>
<div id="scene-iv.-topic-model" class="section level3">
<h3>Scene IV. Topic model</h3>
<p>I’d say we’re now ready for topic model. That didn’t take too much did it?</p>
<div id="running-the-model-and-exploring-the-topics" class="section level4">
<h4>Running the model and exploring the topics</h4>
<p>We’ll run run one with 10 topics. We can also see how things compare with the usual classifications for the texts. Also, this will take a while to run depending on your machine (maybe a minute or two).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(topicmodels)
shakes_10 =<span class="st"> </span><span class="kw">LDA</span>(<span class="kw">convert</span>(shakes_dtm, <span class="dt">to =</span> <span class="st">&quot;topicmodels&quot;</span>), <span class="dt">k =</span> <span class="dv">10</span>, <span class="dt">control=</span><span class="kw">list</span>(<span class="dt">seed=</span><span class="dv">1234</span>))</code></pre></div>
<p>One of the first things to do is to interpret the topics, and we can start by seeing which terms are most probable for each topic.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_terms</span>(shakes_10, <span class="dv">20</span>)</code></pre></div>
<div id="htmlwidget-4e429a5fe43c6297ae67" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4e429a5fe43c6297ae67">{"x":{"filter":"none","data":[["love","hand","dai","heart","death","god","friend","nobl","ey","hear","world","blood","fear","night","word","heaven","stand","peac","live","bear"],["love","sweet","heart","dai","word","true","god","fair","ey","hear","faith","wit","youth","friend","live","world","hand","marri","prai","life"],["love","ey","sweet","heart","fair","beauti","live","dai","night","death","true","hand","fear","word","life","world","shame","light","tongu","prais"],["god","fear","heart","hand","dai","love","nobl","night","stand","word","hear","blood","peac","ey","power","bear","death","life","live","true"],["love","night","ey","dai","sweet","god","marri","hear","heart","fair","hand","death","prai","word","true","signior","live","stai","hous","wit"],["love","god","friend","heart","prai","dai","hear","hand","word","rome","war","true","nobl","follow","bear","woman","fair","hous","live","ey"],["love","honor","god","life","heaven","hand","live","ey","fear","hear","prai","heart","dai","leav","grace","nobl","true","stand","sea","bear"],["love","prai","night","dai","ey","hear","mad","heaven","friend","soul","fair","god","life","hand","jew","word","sweet","husband","heart","leav"],["love","heaven","heart","life","night","poor","natur","hear","honor","prai","live","ey","death","hand","madam","friend","word","fear","stand","true"],["god","death","love","hand","heart","dai","live","grace","blood","life","crown","fear","soul","word","head","leav","friend","arm","sweet","england"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Topic 1<\/th>\n      <th>Topic 2<\/th>\n      <th>Topic 3<\/th>\n      <th>Topic 4<\/th>\n      <th>Topic 5<\/th>\n      <th>Topic 6<\/th>\n      <th>Topic 7<\/th>\n      <th>Topic 8<\/th>\n      <th>Topic 9<\/th>\n      <th>Topic 10<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"tp","order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[-1]; if (value!==null) $(row).css({'background-color':'transparent'});\n}"},"selection":{"mode":"multiple","selected":null,"target":"row"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p><br></p>
<p>We can see there is a lot of overlap in these topics for top terms. Just looking at the top 10, <em>love</em> occurs in all of them, <em>god</em> and <em>heart</em> as well, but we could have guessed this just looking at how often they occur in general. Other measures can be used to assess term importance, such as those that seek to balance the term’s probability of occurrence within a document, and term <em>exclusivity</em>, or how likely a term is to occur in only one particular topic. See the <span class="pack">stm</span> package and corresponding <span class="func">labelTopics</span> function as a way to get several alternatives. As an example I show the results of their version of the following<a href="#fn14" class="footnoteRef" id="fnref14"><sup>14</sup></a>:</p>
<ul>
<li><span class="emph">FREX</span>: <strong>FR</strong>equency and <strong>EX</strong>clusivity, it is a weighted harmonic mean of a term’s rank within a topic in terms of frequency and exclusivity.</li>
<li><span class="emph">lift</span>: Ratio of the term’s probability within a topic to its probability of occurrence across all documents. Overly sensitive to rare words.</li>
<li><span class="emph">score</span>: Another approach that will give more weight to more exclusive terms.</li>
<li><span class="emph">prob</span>: This is just the raw probability of the term within a given topic.</li>
</ul>
<div id="htmlwidget-6a2075a82f80cfb4148c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6a2075a82f80cfb4148c">{"x":{"filter":"none","data":[[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10],["FREX","LIFT","PROB","SCORE","FREX","LIFT","PROB","SCORE","FREX","LIFT","PROB","SCORE","FREX","LIFT","PROB","SCORE","FREX","LIFT","PROB","SCORE","FREX","LIFT","PROB","SCORE","FREX","LIFT","PROB","SCORE","FREX","LIFT","PROB","SCORE","FREX","LIFT","PROB","SCORE","FREX","LIFT","PROB","SCORE"],["egypt, hereford, land, rome, king, austria, march, fulvia, war, england","actium, adalla, alexandria, alexandrian, amynta, antick, antoniad, apollodoru, archelau, armenia","love, hand, dai, heart, death, god, friend, nobl, ey, hear","egypt, hereford, fulvia, cousin, roman, austria, philippi, gage, senat, countrymen","senior, hal, item, forest, ladyship, lover, harri, youth, wale, wrestl","abruptli, aliena, allotteri, arden, ark, atalanta, bask, batlet, boorish, bringest","love, sweet, heart, dai, word, true, god, fair, ey, hear","senior, hal, wrestl, harri, welsh, scot, cousin, item, heigh, lancast","beauti, collatin, quoth, red, lust, delight, woe, l'envoi, adoni, pure","actur, alo, annexion, congest, encrimson, ender, enpatron, extinctur, forbod, holiest","love, ey, sweet, heart, fair, beauti, live, dai, night, death","adoni, remuner, juda, collatin, swain, surviv, salv, juven, mourner, rhetor","troi, thane, greek, trojan, lancast, cawdor, grecian, knock, tent, diseas","thane, abrawl, abrooch, accommodo, achitophel, aconitum, administr, africa, alecto, amurath","god, fear, heart, hand, dai, love, nobl, night, stand, word","trojan, lancast, thane, harri, colevil, unarm, cawdor, cousin, scotland, troi","signior, thisbi, wed, wall, padua, lover, woo, counti, count, marri","abi, aegl, antiopa, asshead, aurora, barki, batti, behowl, bergomask, briski","love, night, ey, dai, sweet, god, marri, hear, heart, fair","signior, padua, thursdai, mantua, verona, thisbi, cousin, athen, bridegroom, shrew","gar, dat, senat, consul, brook, vou, athen, basket, le, rome","gar, abaissiez, accru, adul, aggriev, agincourt, ainsi, alexand, almshous, ang","love, god, friend, heart, prai, dai, hear, hand, word, rome","senat, dat, vou, windsor, leek, bulli, gar, athen, le, basket","monster, high, britain, tyre, garment, bohemia, sea, briton, fish, good","adjourn, aer, andiron, apart, arrearag, augustu, backdoor, backsid, briton, brogu","love, honor, god, life, heaven, hand, live, ey, fear, hear","tyre, tarsu, bohemia, briton, mytilen, napl, antioch, barg, sicilia, prithe","jew, ducat, chain, bond, denmark, christian, ring, monei, dinner, choos","desk, revert, rhenish, sere, twentieth, abbess, america, antipholus, armado, balsamum","love, prai, night, dai, ey, hear, mad, heaven, friend, soul","jew, ducat, dane, denmark, mart, norwai, casket, goldsmith, rope, centaur","moor, handkerchief, knave, daughter, sister, virgin, cypru, sens, whore, nuncl","nuncl, adopti, ail, am, applic, arais, bajazet, banneret, boblibindo, bonto","love, heaven, heart, life, night, poor, natur, hear, honor, prai","moor, cypru, handkerchief, rousillon, mysteri, nuncl, dover, florentin, vouch, citadel","son, protector, emperor, tower, sovereign, empress, realm, crown, traitor, foe","astraea, degrad, faggot, foemen, giveth, scout, tempestu, unrel, aio, berwick","god, death, love, hand, heart, dai, live, grace, blood, life","protector, lancast, empress, uncl, realm, parliament, depos, excurs, derbi, saturnin"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Topic<\/th>\n      <th>Score<\/th>\n      <th>Terms<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","scrollY":"400px","scrollCollapse":true,"pageLength":40,"columnDefs":[{"className":"dt-right","targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,25,40,50,100],"rowCallback":"function(row, data) {\nvar value=data[-1]; if (value!==null) $(row).css({'background-color':'transparent'});\n}"},"selection":{"mode":"multiple","selected":null,"target":"row"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p><br></p>
<p>As another approach, consider the <span class="emph">saliency</span> and <span class="emph">relevance</span> of term via the <span class="pack">LDAvis</span> package. While you can play with it here, it’s probably easier to <a href="vis/index.html">open it separately</a>.</p>
<p><br></p>
<iframe src="vis/index.html" width="100%" height="862px" frameborder="0" scrolling="yes" marginheight="0" marginwidth="0">
<p>
Your browser does not support iframes.
</p>
</iframe>
<p><br></p>
<p>Given all these measures, one can now see how well they match what the topics the documents would be most associated with.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t</span>(<span class="kw">topics</span>(shakes_10, <span class="dv">3</span>))</code></pre></div>
<div id="htmlwidget-4f4d3cd36d89f0fa30f7" style="width:500px;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4f4d3cd36d89f0fa30f7">{"x":{"filter":"none","data":[["A_Lover_s_Complaint","A_Midsummer_Night_s_Dream","All_s_Well_That_Ends_Well","Antony_and_Cleopatra","As_You_Like_It","Coriolanus","Cymbeline","Elegy","Hamlet","Henry_V","Henry_VI_Part_1","Henry_VI_Part_2","Henry_VI_Part_3","Henry_VIII","Julius_Caesar","King_Henry_IV_Part_1","King_Henry_IV_Part_2","King_John","King_Lear","Love_s_Labour_s_Lost","Macbeth","Measure_for_Measure","Much_Ado_about_Nothing","Othello","Pericles_Prince_of_Tyre","Richard_II","Richard_III","Romeo_and_Juliet","Sonnets","The_Comedy_of_Errors","The_Merchant_of_Venice","The_Merry_Wives_of_Windsor","The_Phoenix_and_the_Turtle","The_Rape_of_Lucrece","The_Taming_of_the_Shrew","The_Tempest","The_Two_Gentlemen_of_Verona","The_Winter_s_Tale","Timon_of_Athens","Titus_Andronicus","Troilus_and_Cressida","Twelfth_Night","Venus_and_Adonis"],[3,5,9,1,2,4,7,3,8,6,10,10,10,7,1,2,4,1,9,3,4,9,5,9,7,1,10,5,3,8,8,6,3,3,5,7,2,7,6,10,4,7,3],[9,4,8,4,4,6,1,7,1,2,4,4,1,1,4,4,1,10,4,2,7,8,1,8,1,10,1,7,4,5,4,4,2,10,10,1,3,4,9,1,2,2,10]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Top Topic 1<\/th>\n      <th>Top Topic 2<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","scrollY":"400px","scrollCollapse":true,"pageLength":40,"autoWidth":true,"align":"center","columnDefs":[{"width":"150px","targets":0},{"width":"100px","targets":[1,2]},{"className":"dt-center","targets":[1,2]},{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0}],"order":[],"orderClasses":false,"lengthMenu":[10,25,40,50,100],"rowCallback":"function(row, data) {\nvar value=data[0]; if (value!==null) $(row).css({'background-color':'transparent'});\n}"},"selection":{"mode":"multiple","selected":null,"target":"row"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p><br></p>
<p>For example, base just on term frequency, Hamlet is most likely to be associated with Topic 8. That topic is associated with the (stemmed words) love, prai, night, dai, ey, hear, mad, heaven, friend, soul, fair, god, life, hand, jew, word, sweet, husband, heart, leav. Hamlet is also one that is actually a decent mix, with its second topic expressed being Topic 1, with common terms love, hand, dai, heart, death, god, friend, nobl, ey, hear, world, blood, fear, night, word, heaven, stand, peac, live, bear. They both have love, night, dai, ey, hear, heaven, friend, god, hand, word, heart among their top 20 terms. Sounds about right for Hamlet. The other measures pick up on things like Dane and Denmark.</p>
<p>The following visualization shows a heatmap for the topic probabilities of each document. Darker values mean higher probability for a document expressing that topic. I’ve also added a cluster analysis based on the cosine distance matrix, and the resulting dendrogram<a href="#fn15" class="footnoteRef" id="fnref15"><sup>15</sup></a>. The colored bar on the right represents the given classification of a work as history, tragedy, comedy, or poem.</p>
<p><br></p>
<div id="323c3c0d6c9b" style="width:792px;height:612px;" class="plotly html-widget"></div>
<script type="application/json" data-for="323c3c0d6c9b">{"x":{"data":[{"colorbar":{"ticklen":2,"lenmode":"fraction","xanchor":"left","x":1.1,"y":0,"yanchor":"bottom","len":0.3},"colorscale":[["0","rgba(255,245,235,1)"],["0.14375","rgba(254,227,199,1)"],["0.798","rgba(197,65,2,1)"],["1","rgba(127,39,4,1)"]],"showscale":false,"z":[[0,0.349,0.65,0,0,0,0,0,0,0],[0,0,0.868,0,0,0,0,0,0.131,0],[0,0,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0],[0,0,0.907,0,0,0,0.093,0,0,0],[0,0,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0],[0,0.14,0.86,0,0,0,0,0,0,0],[0,0.993,0.007,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0],[0.995,0,0,0.005,0,0,0,0,0,0],[0.058,0,0,0.498,0,0.443,0,0,0,0],[0,0.216,0,0.784,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0],[0.952,0,0,0,0,0,0,0,0,0.048],[0,0,0,0.054,0,0,0,0,0,0.946],[0,0,0,0,0,0,0,0,0,1],[0,0,0,0.004,0,0,0,0,0,0.996],[0,0,0,1,0,0,0,0,0,0],[0,0.896,0,0.104,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0],[0.21,0,0,0,0,0,0,0,0,0.79],[0.632,0,0,0,0,0,0,0,0,0.368],[0,0,0,0,0,0.695,0.15,0,0.155,0],[0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0],[0,0,0,0,1,0,0,0,0,0],[0,0.218,0,0,0.169,0,0.613,0,0,0],[0.033,0.012,0,0,0.956,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0.002,0.998,0],[0.006,0,0,0,0,0,0.994,0,0,0],[0,0,0,0,0,0,0,0.169,0.831,0],[0.178,0,0,0,0,0,0,0.822,0,0],[0,0,0,0,0,0,0,0.003,0.997,0],[0,0,0,0,0,0,0,0,1,0],[0,0,0,0.138,0,0,0.862,0,0,0],[0.002,0,0,0,0,0,0.998,0,0,0]],"x":[1,2,3,4,5,6,7,8,9,10],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"showlegend":false,"type":"heatmap","xaxis":"x","yaxis":"y","frame":null,"xgap":2,"ygap":2},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[6.5,7.5,7.5,6.5,6.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 2","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":true,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[7.5,8.5,8.5,7.5,7.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 20","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[35.5,36.5,36.5,35.5,35.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 22","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[33.5,34.5,34.5,33.5,33.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 23","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[29.5,30.5,30.5,29.5,29.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 25","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[39.5,40.5,40.5,39.5,39.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 3","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[11.5,12.5,12.5,11.5,11.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 30","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[30.5,31.5,31.5,30.5,30.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 31","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[10.5,11.5,11.5,10.5,10.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 32","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[31.5,32.5,32.5,31.5,31.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 35","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[12.5,13.5,13.5,12.5,12.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 36","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[8.5,9.5,9.5,8.5,8.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 37","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[41.5,42.5,42.5,41.5,41.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 38","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[32.5,33.5,33.5,32.5,32.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 42","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[34.5,35.5,35.5,34.5,34.5],"text":"value: Comedy<br />variable: shakes_types.class<br />row: 5","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(13,8,135,1)","hoveron":"fills","name":"Comedy","legendgroup":"Comedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[25.5,26.5,26.5,25.5,25.5],"text":"value: History<br />variable: shakes_types.class<br />row: 10","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(156,23,158,1)","hoveron":"fills","name":"History","legendgroup":"History","showlegend":true,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[20.5,21.5,21.5,20.5,20.5],"text":"value: History<br />variable: shakes_types.class<br />row: 11","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(156,23,158,1)","hoveron":"fills","name":"History","legendgroup":"History","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[22.5,23.5,23.5,22.5,22.5],"text":"value: History<br />variable: shakes_types.class<br />row: 12","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(156,23,158,1)","hoveron":"fills","name":"History","legendgroup":"History","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[21.5,22.5,22.5,21.5,21.5],"text":"value: History<br />variable: shakes_types.class<br />row: 13","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(156,23,158,1)","hoveron":"fills","name":"History","legendgroup":"History","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[36.5,37.5,37.5,36.5,36.5],"text":"value: History<br />variable: shakes_types.class<br />row: 14","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(156,23,158,1)","hoveron":"fills","name":"History","legendgroup":"History","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[24.5,25.5,25.5,24.5,24.5],"text":"value: History<br />variable: shakes_types.class<br />row: 16","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(156,23,158,1)","hoveron":"fills","name":"History","legendgroup":"History","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[23.5,24.5,24.5,23.5,23.5],"text":"value: History<br />variable: shakes_types.class<br />row: 17","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(156,23,158,1)","hoveron":"fills","name":"History","legendgroup":"History","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[19.5,20.5,20.5,19.5,19.5],"text":"value: History<br />variable: shakes_types.class<br />row: 18","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(156,23,158,1)","hoveron":"fills","name":"History","legendgroup":"History","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[27.5,28.5,28.5,27.5,27.5],"text":"value: History<br />variable: shakes_types.class<br />row: 26","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(156,23,158,1)","hoveron":"fills","name":"History","legendgroup":"History","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[26.5,27.5,27.5,26.5,26.5],"text":"value: History<br />variable: shakes_types.class<br />row: 27","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(156,23,158,1)","hoveron":"fills","name":"History","legendgroup":"History","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[1.5,2.5,2.5,1.5,1.5],"text":"value: Poem<br />variable: shakes_types.class<br />row: 1","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(237,121,83,1)","hoveron":"fills","name":"Poem","legendgroup":"Poem","showlegend":true,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[9.5,10.5,10.5,9.5,9.5],"text":"value: Poem<br />variable: shakes_types.class<br />row: 29","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(237,121,83,1)","hoveron":"fills","name":"Poem","legendgroup":"Poem","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[0.5,1.5,1.5,0.5,0.5],"text":"value: Poem<br />variable: shakes_types.class<br />row: 33","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(237,121,83,1)","hoveron":"fills","name":"Poem","legendgroup":"Poem","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[3.5,4.5,4.5,3.5,3.5],"text":"value: Poem<br />variable: shakes_types.class<br />row: 34","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(237,121,83,1)","hoveron":"fills","name":"Poem","legendgroup":"Poem","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[2.5,3.5,3.5,2.5,2.5],"text":"value: Poem<br />variable: shakes_types.class<br />row: 43","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(237,121,83,1)","hoveron":"fills","name":"Poem","legendgroup":"Poem","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[4.5,5.5,5.5,4.5,4.5],"text":"value: Poem<br />variable: shakes_types.class<br />row: 8","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(237,121,83,1)","hoveron":"fills","name":"Poem","legendgroup":"Poem","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[15.5,16.5,16.5,15.5,15.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 15","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":true,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[40.5,41.5,41.5,40.5,40.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 19","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[18.5,19.5,19.5,18.5,18.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 21","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[37.5,38.5,38.5,37.5,37.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 24","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[5.5,6.5,6.5,5.5,5.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 28","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[28.5,29.5,29.5,28.5,28.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 39","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[14.5,15.5,15.5,14.5,14.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 4","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[13.5,14.5,14.5,13.5,13.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 40","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[17.5,18.5,18.5,17.5,17.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 41","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[16.5,17.5,17.5,16.5,16.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 6","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[42.5,43.5,43.5,42.5,42.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 7","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.5,0.5,1.5,1.5,0.5],"y":[38.5,39.5,39.5,38.5,38.5],"text":"value: Tragedy<br />variable: shakes_types.class<br />row: 9","type":"scatter","mode":"lines","line":{"width":0.377952755905512,"color":"transparent","dash":"solid"},"fill":"toself","fillcolor":"rgba(240,249,33,1)","hoveron":"fills","name":"Tragedy","legendgroup":"Tragedy","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.6483536920552,0.6483536920552,null,0.6483536920552,0.56743911588955,null,0.56743911588955,0.56743911588955,null,0.56743911588955,0,null,0.56743911588955,0.56743911588955,null,0.56743911588955,0.28328555563051,null,0.28328555563051,0.28328555563051,null,0.28328555563051,0.238551881751674,null,0.238551881751674,0.238551881751674,null,0.238551881751674,0,null,0.238551881751674,0.238551881751674,null,0.238551881751674,0,null,0.28328555563051,0.28328555563051,null,0.28328555563051,0.255854112424187,null,0.255854112424187,0.255854112424187,null,0.255854112424187,0,null,0.255854112424187,0.255854112424187,null,0.255854112424187,0.215172651666788,null,0.215172651666788,0.215172651666788,null,0.215172651666788,0,null,0.215172651666788,0.215172651666788,null,0.215172651666788,0],"y":[10.8828125,6.3125,null,6.3125,6.3125,null,6.3125,5,null,5,5,null,6.3125,7.625,null,7.625,7.625,null,7.625,6.5,null,6.5,6.5,null,6.5,6,null,6,6,null,6.5,7,null,7,7,null,7.625,8.75,null,8.75,8.75,null,8.75,8,null,8,8,null,8.75,9.5,null,9.5,9.5,null,9.5,9,null,9,9,null,9.5,10,null,10,10],"type":"scatter","mode":"lines","showlegend":false,"hoverinfo":"x","name":"#39BEB1","line":{"fillcolor":"rgba(57,190,177,0.5)","color":"rgba(57,190,177,1)"},"xaxis":"x3","yaxis":"y","frame":null},{"x":[0.727754961071957,0.727754961071957,null,0.727754961071957,0.545154742768996,null,0.545154742768996,0.545154742768996,null,0.545154742768996,0,null,0.545154742768996,0.545154742768996,null,0.545154742768996,0.317459004171585,null,0.317459004171585,0.317459004171585,null,0.317459004171585,0,null,0.317459004171585,0.317459004171585,null,0.317459004171585,0],"y":[6.81640625,2.75,null,2.75,2.75,null,2.75,2,null,2,2,null,2.75,3.5,null,3.5,3.5,null,3.5,3,null,3,3,null,3.5,4,null,4,4],"type":"scatter","mode":"lines","showlegend":false,"hoverinfo":"x","name":"#ABB065","line":{"fillcolor":"rgba(171,176,101,0.5)","color":"rgba(171,176,101,1)"},"xaxis":"x3","yaxis":"y","frame":null},{"x":[0.6483536920552,0.6483536920552,null,0.6483536920552,0.562474369780847,null,0.562474369780847,0.562474369780847,null,0.562474369780847,0.460202249089195,null,0.460202249089195,0.460202249089195,null,0.460202249089195,0,null,0.460202249089195,0.460202249089195,null,0.460202249089195,0,null,0.562474369780847,0.562474369780847,null,0.562474369780847,0.528909077655854,null,0.528909077655854,0.528909077655854,null,0.528909077655854,0,null,0.528909077655854,0.528909077655854,null,0.528909077655854,0.494026675389306,null,0.494026675389306,0.494026675389306,null,0.494026675389306,0.463388972296866,null,0.463388972296866,0.463388972296866,null,0.463388972296866,0.37160437406411,null,0.37160437406411,0.37160437406411,null,0.37160437406411,0,null,0.37160437406411,0.37160437406411,null,0.37160437406411,0.29611074127897,null,0.29611074127897,0.29611074127897,null,0.29611074127897,0,null,0.29611074127897,0.29611074127897,null,0.29611074127897,0.273570023363081,null,0.273570023363081,0.273570023363081,null,0.273570023363081,0,null,0.273570023363081,0.273570023363081,null,0.273570023363081,0,null,0.463388972296866,0.463388972296866,null,0.463388972296866,0.38151958821934,null,0.38151958821934,0.38151958821934,null,0.38151958821934,0,null,0.38151958821934,0.38151958821934,null,0.38151958821934,0.365500734835557,null,0.365500734835557,0.365500734835557,null,0.365500734835557,0,null,0.365500734835557,0.365500734835557,null,0.365500734835557,0.349521616058503,null,0.349521616058503,0.349521616058503,null,0.349521616058503,0.281331315508991,null,0.281331315508991,0.281331315508991,null,0.281331315508991,0,null,0.281331315508991,0.281331315508991,null,0.281331315508991,0.224390105554261,null,0.224390105554261,0.224390105554261,null,0.224390105554261,0,null,0.224390105554261,0.224390105554261,null,0.224390105554261,0.207496185282766,null,0.207496185282766,0.207496185282766,null,0.207496185282766,0,null,0.207496185282766,0.207496185282766,null,0.207496185282766,0,null,0.349521616058503,0.349521616058503,null,0.349521616058503,0.300945636559607,null,0.300945636559607,0.300945636559607,null,0.300945636559607,0.22362066619775,null,0.22362066619775,0.22362066619775,null,0.22362066619775,0,null,0.22362066619775,0.22362066619775,null,0.22362066619775,0,null,0.300945636559607,0.300945636559607,null,0.300945636559607,0.274855550073583,null,0.274855550073583,0.274855550073583,null,0.274855550073583,0,null,0.274855550073583,0.274855550073583,null,0.274855550073583,0.193519879319223,null,0.193519879319223,0.193519879319223,null,0.193519879319223,0,null,0.193519879319223,0.193519879319223,null,0.193519879319223,0,null,0.494026675389306,0.494026675389306,null,0.494026675389306,0.428458261953637,null,0.428458261953637,0.428458261953637,null,0.428458261953637,0.41429949902019,null,0.41429949902019,0.41429949902019,null,0.41429949902019,0.34580739346009,null,0.34580739346009,0.34580739346009,null,0.34580739346009,0,null,0.34580739346009,0.34580739346009,null,0.34580739346009,0,null,0.41429949902019,0.41429949902019,null,0.41429949902019,0.360484705930002,null,0.360484705930002,0.360484705930002,null,0.360484705930002,0,null,0.360484705930002,0.360484705930002,null,0.360484705930002,0.326246076273132,null,0.326246076273132,0.326246076273132,null,0.326246076273132,0,null,0.326246076273132,0.326246076273132,null,0.326246076273132,0.2689545572014,null,0.2689545572014,0.2689545572014,null,0.2689545572014,0,null,0.2689545572014,0.2689545572014,null,0.2689545572014,0.232820065650927,null,0.232820065650927,0.232820065650927,null,0.232820065650927,0,null,0.232820065650927,0.232820065650927,null,0.232820065650927,0,null,0.428458261953637,0.428458261953637,null,0.428458261953637,0.344830620003623,null,0.344830620003623,0.344830620003623,null,0.344830620003623,0.310148019002102,null,0.310148019002102,0.310148019002102,null,0.310148019002102,0,null,0.310148019002102,0.310148019002102,null,0.310148019002102,0,null,0.344830620003623,0.344830620003623,null,0.344830620003623,0.319346909101124,null,0.319346909101124,0.319346909101124,null,0.319346909101124,0.221846503572039,null,0.221846503572039,0.221846503572039,null,0.221846503572039,0,null,0.221846503572039,0.221846503572039,null,0.221846503572039,0,null,0.319346909101124,0.319346909101124,null,0.319346909101124,0.291170380148951,null,0.291170380148951,0.291170380148951,null,0.291170380148951,0,null,0.291170380148951,0.291170380148951,null,0.291170380148951,0.265710911850167,null,0.265710911850167,0.265710911850167,null,0.265710911850167,0,null,0.265710911850167,0.265710911850167,null,0.265710911850167,0.230882061558914,null,0.230882061558914,0.230882061558914,null,0.230882061558914,0,null,0.230882061558914,0.230882061558914,null,0.230882061558914,0],"y":[10.8828125,15.453125,null,15.453125,15.453125,null,15.453125,11.5,null,11.5,11.5,null,11.5,11,null,11,11,null,11.5,12,null,12,12,null,15.453125,19.40625,null,19.40625,19.40625,null,19.40625,13,null,13,13,null,19.40625,25.8125,null,25.8125,25.8125,null,25.8125,17.21875,null,17.21875,17.21875,null,17.21875,14.875,null,14.875,14.875,null,14.875,14,null,14,14,null,14.875,15.75,null,15.75,15.75,null,15.75,15,null,15,15,null,15.75,16.5,null,16.5,16.5,null,16.5,16,null,16,16,null,16.5,17,null,17,17,null,17.21875,19.5625,null,19.5625,19.5625,null,19.5625,18,null,18,18,null,19.5625,21.125,null,21.125,21.125,null,21.125,19,null,19,19,null,21.125,23.25,null,23.25,23.25,null,23.25,20.875,null,20.875,20.875,null,20.875,20,null,20,20,null,20.875,21.75,null,21.75,21.75,null,21.75,21,null,21,21,null,21.75,22.5,null,22.5,22.5,null,22.5,22,null,22,22,null,22.5,23,null,23,23,null,23.25,25.625,null,25.625,25.625,null,25.625,24.5,null,24.5,24.5,null,24.5,24,null,24,24,null,24.5,25,null,25,25,null,25.625,26.75,null,26.75,26.75,null,26.75,26,null,26,26,null,26.75,27.5,null,27.5,27.5,null,27.5,27,null,27,27,null,27.5,28,null,28,28,null,25.8125,34.40625,null,34.40625,34.40625,null,34.40625,30.71875,null,30.71875,30.71875,null,30.71875,29.5,null,29.5,29.5,null,29.5,29,null,29,29,null,29.5,30,null,30,30,null,30.71875,31.9375,null,31.9375,31.9375,null,31.9375,31,null,31,31,null,31.9375,32.875,null,32.875,32.875,null,32.875,32,null,32,32,null,32.875,33.75,null,33.75,33.75,null,33.75,33,null,33,33,null,33.75,34.5,null,34.5,34.5,null,34.5,34,null,34,34,null,34.5,35,null,35,35,null,34.40625,38.09375,null,38.09375,38.09375,null,38.09375,36.5,null,36.5,36.5,null,36.5,36,null,36,36,null,36.5,37,null,37,37,null,38.09375,39.6875,null,39.6875,39.6875,null,39.6875,38.5,null,38.5,38.5,null,38.5,38,null,38,38,null,38.5,39,null,39,39,null,39.6875,40.875,null,40.875,40.875,null,40.875,40,null,40,40,null,40.875,41.75,null,41.75,41.75,null,41.75,41,null,41,41,null,41.75,42.5,null,42.5,42.5,null,42.5,42,null,42,42,null,42.5,43,null,43,43],"type":"scatter","mode":"lines","showlegend":false,"hoverinfo":"x","name":"#ACA4E2","line":{"fillcolor":"rgba(172,164,226,0.5)","color":"rgba(172,164,226,1)"},"xaxis":"x3","yaxis":"y","frame":null},{"x":[0.85969828672322,0.85969828672322,null,0.85969828672322,0],"y":[3.908203125,1,null,1,1],"type":"scatter","mode":"lines","showlegend":false,"hoverinfo":"x","name":"#E495A5","line":{"fillcolor":"rgba(228,149,165,0.5)","color":"rgba(228,149,165,1)"},"xaxis":"x3","yaxis":"y","frame":null},{"x":[0.85969828672322,0.85969828672322,null,0.85969828672322,0.727754961071957,null,0.727754961071957,0.727754961071957,null,0.727754961071957,0.6483536920552],"y":[3.908203125,6.81640625,null,6.81640625,6.81640625,null,6.81640625,10.8828125,null,10.8828125,10.8828125],"type":"scatter","mode":"lines","showlegend":false,"hoverinfo":"x","name":"black","line":{"fillcolor":"rgba(0,0,0,0.5)","color":"rgba(0,0,0,1)"},"xaxis":"x3","yaxis":"y","frame":null}],"layout":{"xaxis":{"domain":[0.025,0.725],"tickfont":{"size":10},"tickangle":45,"tickvals":[1,2,3,4,5,6,7,8,9,10],"ticktext":["Topic 1","Topic 2","Topic 3","Topic 4","Topic 5","Topic 6","Topic 7","Topic 8","Topic 9","Topic 10"],"linecolor":"#ffffff","range":[0.5,10.5],"showticklabels":true,"title":"","anchor":"y","zeroline":false,"showgrid":false},"xaxis2":{"domain":[0.725,0.775],"type":"linear","autorange":false,"range":[0.5,1.5],"tickmode":"array","ticktext":["shakes_types.class"],"tickvals":[1],"categoryorder":"array","categoryarray":["shakes_types.class"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"xaxis3":{"domain":[0.775,0.975],"title":"","range":[0,0.85969828672322],"linecolor":"#ffffff","showgrid":false,"anchor":"y"},"yaxis":{"domain":[0,1],"title":"","range":[0.5,43.5],"linecolor":"#ffffff","showgrid":false,"anchor":"x","type":"linear","autorange":false,"tickmode":"array","ticktext":["The_Phoenix_and_the_Turtle","A_Lover_s_Complaint","Venus_and_Adonis","The_Rape_of_Lucrece","Elegy","Romeo_and_Juliet","A_Midsummer_Night_s_Dream","Love_s_Labour_s_Lost","The_Two_Gentlemen_of_Verona","Sonnets","The_Merry_Wives_of_Windsor","The_Comedy_of_Errors","The_Tempest","Titus_Andronicus","Antony_and_Cleopatra","Julius_Caesar","Coriolanus","Troilus_and_Cressida","Macbeth","King_John","Henry_VI_Part_1","Henry_VI_Part_3","Henry_VI_Part_2","King_Henry_IV_Part_2","King_Henry_IV_Part_1","Henry_V","Richard_III","Richard_II","Timon_of_Athens","Pericles_Prince_of_Tyre","The_Merchant_of_Venice","The_Taming_of_the_Shrew","Twelfth_Night","Much_Ado_about_Nothing","As_You_Like_It","Measure_for_Measure","Henry_VIII","Othello","Hamlet","All_s_Well_That_Ends_Well","King_Lear","The_Winter_s_Tale","Cymbeline"],"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"categoryorder":"array","categoryarray":["33","1","43","34","8","28","2","20","37","29","32","30","36","40","4","15","6","41","21","18","11","13","12","17","16","10","27","26","39","25","31","35","42","23","5","22","14","24","9","3","19","38","7"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":null,"family":null,"size":10},"tickangle":0,"showline":false,"linewidth":0,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.725,"x1":0.775,"y0":0,"y1":1}],"margin":{"b":48,"l":162,"t":0,"r":null},"hovermode":"closest","showlegend":false,"title":"","paper_bgcolor":"transparent","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":1,"yanchor":"top"},"width":792,"height":612,"barmode":"relative","plot_bgcolor":"transparent"},"attrs":{"323c521a27d9":{"z":[[0,0.349,0.65,0,0,0,0,0,0,0],[0,0,0.868,0,0,0,0,0,0.131,0],[0,0,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0],[0,0,0.907,0,0,0,0.093,0,0,0],[0,0,0,0,1,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0],[0,0.14,0.86,0,0,0,0,0,0,0],[0,0.993,0.007,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0],[0.995,0,0,0.005,0,0,0,0,0,0],[0.058,0,0,0.498,0,0.443,0,0,0,0],[0,0.216,0,0.784,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0],[0.952,0,0,0,0,0,0,0,0,0.048],[0,0,0,0.054,0,0,0,0,0,0.946],[0,0,0,0,0,0,0,0,0,1],[0,0,0,0.004,0,0,0,0,0,0.996],[0,0,0,1,0,0,0,0,0,0],[0,0.896,0,0.104,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0],[0.21,0,0,0,0,0,0,0,0,0.79],[0.632,0,0,0,0,0,0,0,0,0.368],[0,0,0,0,0,0.695,0.15,0,0.155,0],[0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,1,0,0],[0,0,0,0,1,0,0,0,0,0],[0,0.218,0,0,0.169,0,0.613,0,0,0],[0.033,0.012,0,0,0.956,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0.002,0.998,0],[0.006,0,0,0,0,0,0.994,0,0,0],[0,0,0,0,0,0,0,0.169,0.831,0],[0.178,0,0,0,0,0,0,0.822,0,0],[0,0,0,0,0,0,0,0.003,0.997,0],[0,0,0,0,0,0,0,0,1,0],[0,0,0,0.138,0,0,0.862,0,0,0],[0.002,0,0,0,0,0,0.998,0,0,0]],"x":[1,2,3,4,5,6,7,8,9,10],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"showlegend":false,"zmin":null,"zmax":null,"colors":"Oranges","alpha":1,"sizes":[10,100],"type":"heatmap"},"323c2d97460f":{"fill":{},"x":{},"y":{},"type":"scatter"},"323c13bb5102":{"alpha":1,"sizes":[10,100],"x":{},"y":{},"xend":{},"yend":{},"type":"scatter","mode":"lines","color":{},"showlegend":false,"colors":["#39BEB1","#ABB065","#ACA4E2","#E495A5","black"],"hoverinfo":"x"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false,"displaylogo":false,"modeBarButtonsToRemove":["pan2d"],"displayModeBar":false,"showLink":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"subplot":true,"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p><br></p>
<p>A couple things stand out. To begin with, most works are associated with one topic<a href="#fn16" class="footnoteRef" id="fnref16"><sup>16</sup></a>. In terms of the discovered topics, traditional classification really probably only works for the <span style="color:#9C179E">historical</span> works, as they cluster together as expected (except for Henry the VIII, possibly due to it being a collaborative work). Furthermore, <span style="color:#F0F921">tragedies</span> and <span style="color:#0D0887">comedies</span> might hit on the same topics, albeit from different perspectives. In addition, at least some works are very poetical, or at least have topics in common with the <span style="color:#ED7953">poems</span> (love, beauty). If we take four clusters from the cluster analysis, the result boils down to <em>Phoenix</em> (on its own), standard poems, a mixed bag of more love-oriented works and the remaining poems, then everything else.</p>
<p>Alternatively, one could merely classify the works based on their probable topics, which would make more sense if clustering of the works is in fact the goal. The following visualization attempts to order them based on their most probable topic. The order is based on the most likely topics across all documents.</p>
<p><br></p>
<div id="323c7f48511" style="width:650px;height:800px;" class="plotly html-widget"></div>
<script type="application/json" data-for="323c7f48511">{"x":{"data":[{"colorbar":{"ticklen":2,"lenmode":"fraction","xanchor":"left","x":1.1,"y":0,"yanchor":"bottom","len":0.3},"colorscale":[["0","rgba(255,245,235,1)"],["0.14375","rgba(254,227,199,1)"],["0.798","rgba(197,65,2,1)"],["1","rgba(127,39,4,1)"]],"showscale":false,"z":[[0,0,0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0.216,0.784,0,0],[0,0,0,0,0,0,0.896,0.104,0,0],[0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0.058,0,0.498,0.443,0],[0,0,0,0,0,0.178,0,0,0,0.822],[0,0,0,0,0,0.995,0,0.005,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0.831,0,0,0,0,0.169],[0,0,0,0,0.997,0,0,0,0,0.003],[0,0,0,0,0.998,0,0,0,0,0.002],[0,0,0,0,1,0,0,0,0,0],[0,0,0,0.956,0,0.033,0.012,0,0,0],[0,0,0,1,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0],[0,0,0.048,0,0,0.952,0,0,0,0],[0,0,0.368,0,0,0.632,0,0,0,0],[0,0,0.79,0,0,0.21,0,0,0,0],[0,0,0.946,0,0,0,0,0.054,0,0],[0,0,0.996,0,0,0,0,0.004,0,0],[0,0,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0],[0,0.15,0,0,0.155,0,0,0,0.695,0],[0,0.613,0,0.169,0,0,0.218,0,0,0],[0,0.862,0,0,0,0,0,0.138,0,0],[0,0.994,0,0,0,0.006,0,0,0,0],[0,0.998,0,0,0,0.002,0,0,0,0],[0,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0],[0.007,0,0,0,0,0,0.993,0,0,0],[0.65,0,0,0,0,0,0.349,0,0,0],[0.86,0,0,0,0,0,0.14,0,0,0],[0.868,0,0,0,0.131,0,0,0,0,0],[0.907,0.093,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0]],"x":[1,2,3,4,5,6,7,8,9,10],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"showlegend":false,"type":"heatmap","xaxis":"x","yaxis":"y","frame":null}],"layout":{"xaxis":{"domain":[0,1],"tickfont":{"size":8},"tickangle":0,"tickvals":[1,2,3,4,5,6,7,8,9,10],"ticktext":["love<br />ey<br />sweet<br />heart<br />fair<br />beauti<br />live<br />dai<br />night<br />death","love<br />honor<br />god<br />life<br />heaven<br />hand<br />live<br />ey<br />fear<br />hear","god<br />death<br />love<br />hand<br />heart<br />dai<br />live<br />grace<br />blood<br />life","love<br />night<br />ey<br />dai<br />sweet<br />god<br />marri<br />hear<br />heart<br />fair","love<br />heaven<br />heart<br />life<br />night<br />poor<br />natur<br />hear<br />honor<br />prai","love<br />hand<br />dai<br />heart<br />death<br />god<br />friend<br />nobl<br />ey<br />hear","love<br />sweet<br />heart<br />dai<br />word<br />true<br />god<br />fair<br />ey<br />hear","god<br />fear<br />heart<br />hand<br />dai<br />love<br />nobl<br />night<br />stand<br />word","love<br />god<br />friend<br />heart<br />prai<br />dai<br />hear<br />hand<br />word<br />rome","love<br />prai<br />night<br />dai<br />ey<br />hear<br />mad<br />heaven<br />friend<br />soul"],"linecolor":"#ffffff","range":[0.5,10.5],"showticklabels":true,"title":"","anchor":"y","zeroline":false,"showgrid":false},"yaxis":{"domain":[0,1],"tickfont":{"size":8},"tickangle":0,"tickvals":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"ticktext":["The_Merchant_of_Venice","The_Comedy_of_Errors","The_Merry_Wives_of_Windsor","Henry_V","Macbeth","King_Henry_IV_Part_2","Troilus_and_Cressida","King_Henry_IV_Part_1","As_You_Like_It","Coriolanus","Hamlet","Julius_Caesar","Antony_and_Cleopatra","Othello","All_s_Well_That_Ends_Well","Measure_for_Measure","King_Lear","Much_Ado_about_Nothing","The_Taming_of_the_Shrew","Romeo_and_Juliet","A_Midsummer_Night_s_Dream","King_John","Richard_II","Richard_III","Henry_VI_Part_1","Henry_VI_Part_2","Titus_Andronicus","Henry_VI_Part_3","Timon_of_Athens","Twelfth_Night","The_Winter_s_Tale","Henry_VIII","Cymbeline","The_Tempest","Pericles_Prince_of_Tyre","The_Two_Gentlemen_of_Verona","The_Phoenix_and_the_Turtle","Love_s_Labour_s_Lost","A_Lover_s_Complaint","Elegy","Venus_and_Adonis","The_Rape_of_Lucrece","Sonnets"],"linecolor":"#ffffff","range":[0.5,43.5],"showticklabels":true,"title":"","anchor":"x","zeroline":false,"showgrid":false},"margin":{"b":264,"l":129.6,"t":0,"r":null},"hovermode":"closest","showlegend":false,"title":"","legend":{"y":1,"yanchor":"top"},"plot_bgcolor":"transparent","paper_bgcolor":"transparent"},"attrs":{"323c6e209b0":{"z":[[0,0,0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0.216,0.784,0,0],[0,0,0,0,0,0,0.896,0.104,0,0],[0,0,0,0,0,0,1,0,0,0],[0,0,0,0,0,0.058,0,0.498,0.443,0],[0,0,0,0,0,0.178,0,0,0,0.822],[0,0,0,0,0,0.995,0,0.005,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0.831,0,0,0,0,0.169],[0,0,0,0,0.997,0,0,0,0,0.003],[0,0,0,0,0.998,0,0,0,0,0.002],[0,0,0,0,1,0,0,0,0,0],[0,0,0,0.956,0,0.033,0.012,0,0,0],[0,0,0,1,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0],[0,0,0.048,0,0,0.952,0,0,0,0],[0,0,0.368,0,0,0.632,0,0,0,0],[0,0,0.79,0,0,0.21,0,0,0,0],[0,0,0.946,0,0,0,0,0.054,0,0],[0,0,0.996,0,0,0,0,0.004,0,0],[0,0,1,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0],[0,0.15,0,0,0.155,0,0,0,0.695,0],[0,0.613,0,0.169,0,0,0.218,0,0,0],[0,0.862,0,0,0,0,0,0.138,0,0],[0,0.994,0,0,0,0.006,0,0,0,0],[0,0.998,0,0,0,0.002,0,0,0,0],[0,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0],[0.007,0,0,0,0,0,0.993,0,0,0],[0.65,0,0,0,0,0,0.349,0,0,0],[0.86,0,0,0,0,0,0.14,0,0,0],[0.868,0,0,0,0.131,0,0,0,0,0],[0.907,0.093,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0]],"x":[1,2,3,4,5,6,7,8,9,10],"y":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],"showlegend":false,"zmin":null,"zmax":null,"colors":"Oranges","alpha":1,"sizes":[10,100],"type":"heatmap"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false,"displaylogo":false,"modeBarButtonsToRemove":["pan2d"],"displayModeBar":false,"showLink":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"subplot":true,"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>The following shows the average topic probability for each of the traditional classes. Topics are represented by their first five most probable terms.</p>
<div id="323c3a1a5449" style="width:650px;height:600px;" class="plotly html-widget"></div>
<script type="application/json" data-for="323c3a1a5449">{"x":{"data":[{"colorbar":{"ticklen":2,"lenmode":"fraction","xanchor":"left","x":1.1,"y":0,"yanchor":"bottom","len":0.3},"colorscale":[["0","rgba(255,245,235,1)"],["0.00091244239631336","rgba(255,245,235,1)"],["0.0101751152073733","rgba(255,244,233,1)"],["0.0188709677419355","rgba(255,243,231,1)"],["0.0340921658986175","rgba(255,241,227,1)"],["0.0642811059907834","rgba(255,237,220,1)"],["0.0825345622119816","rgba(255,235,216,1)"],["0.0921658986175115","rgba(254,234,214,1)"],["0.0973640552995391","rgba(254,233,212,1)"],["0.105230414746544","rgba(254,232,211,1)"],["0.109935483870968","rgba(254,232,209,1)"],["0.121797235023041","rgba(254,230,207,1)"],["0.147281105990783","rgba(254,226,198,1)"],["0.170930875576037","rgba(254,222,190,1)"],["0.191059907834101","rgba(254,218,183,1)"],["0.206428571428571","rgba(254,216,177,1)"],["0.225506912442396","rgba(253,212,171,1)"],["0.332175115207373","rgba(254,186,126,1)"],["1","rgba(127,39,4,1)"]],"showscale":false,"z":[[0.186083333333333,0.018,0,0.190583333333333,0.0833333333333333,0.0948333333333333,0.0956666666666667,0.0825833333333333,0.1655,0.0833333333333333],[0,0.0581666666666667,0.904166666666667,0,0,0,0.0155,0,0.0218333333333333,0],[0.18,0.0896,0,0.1162,0,0.1,0.0994,0,0,0.4148],[0.0022,0.157533333333333,0.0578,0.0092,0.208333333333333,0.0666666666666667,0.231666666666667,0.133666666666667,0.133,0]],"x":[1,2,3,4,5,6,7,8,9,10],"y":[1,2,3,4],"showlegend":false,"type":"heatmap","xaxis":"x","yaxis":"y","frame":null}],"layout":{"xaxis":{"domain":[0,1],"tickfont":{"size":10},"tickangle":0,"tickvals":[1,2,3,4,5,6,7,8,9,10],"ticktext":["love<br />hand<br />dai<br />heart<br />death<br />god<br />friend<br />nobl<br />ey<br />hear","love<br />sweet<br />heart<br />dai<br />word<br />true<br />god<br />fair<br />ey<br />hear","love<br />ey<br />sweet<br />heart<br />fair<br />beauti<br />live<br />dai<br />night<br />death","god<br />fear<br />heart<br />hand<br />dai<br />love<br />nobl<br />night<br />stand<br />word","love<br />night<br />ey<br />dai<br />sweet<br />god<br />marri<br />hear<br />heart<br />fair","love<br />god<br />friend<br />heart<br />prai<br />dai<br />hear<br />hand<br />word<br />rome","love<br />honor<br />god<br />life<br />heaven<br />hand<br />live<br />ey<br />fear<br />hear","love<br />prai<br />night<br />dai<br />ey<br />hear<br />mad<br />heaven<br />friend<br />soul","love<br />heaven<br />heart<br />life<br />night<br />poor<br />natur<br />hear<br />honor<br />prai","god<br />death<br />love<br />hand<br />heart<br />dai<br />live<br />grace<br />blood<br />life"],"linecolor":"#ffffff","range":[0.5,10.5],"showticklabels":true,"title":"","anchor":"y","zeroline":false,"showgrid":false},"yaxis":{"domain":[0,1],"tickfont":{"size":10},"tickangle":0,"tickvals":[1,2,3,4],"ticktext":["Tragedy","Poem","History","Comedy"],"linecolor":"#ffffff","range":[0.5,4.5],"showticklabels":true,"title":"","anchor":"x","zeroline":false,"showgrid":false},"margin":{"b":330,"l":42,"t":0,"r":null},"hovermode":"closest","showlegend":false,"title":"","legend":{"y":1,"yanchor":"top"},"plot_bgcolor":"transparent","paper_bgcolor":"transparent"},"attrs":{"323c13af1448":{"z":[[0.186083333333333,0.018,0,0.190583333333333,0.0833333333333333,0.0948333333333333,0.0956666666666667,0.0825833333333333,0.1655,0.0833333333333333],[0,0.0581666666666667,0.904166666666667,0,0,0,0.0155,0,0.0218333333333333,0],[0.18,0.0896,0,0.1162,0,0.1,0.0994,0,0,0.4148],[0.0022,0.157533333333333,0.0578,0.0092,0.208333333333333,0.0666666666666667,0.231666666666667,0.133666666666667,0.133,0]],"x":[1,2,3,4,5,6,7,8,9,10],"y":[1,2,3,4],"showlegend":false,"zmin":null,"zmax":null,"colors":"Oranges","alpha":1,"sizes":[10,100],"type":"heatmap"}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false,"displaylogo":false,"modeBarButtonsToRemove":["pan2d"],"displayModeBar":false,"showLink":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1}},"subplot":true,"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":{"render":[{"code":"function(el, x) { var ctConfig = crosstalk.var('plotlyCrosstalkOpts').set({\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1}}); }","data":null}]}}</script>
<p>Aside from the poems, the classes are a good mix of topics, and appear to have some overlap. Tragedies are perhaps most diverse.</p>
</div>
<div id="summary-of-topic-models" class="section level4">
<h4>Summary of Topic Models</h4>
<p>And I grow weary…</p>
<p><br> <br> <br></p>
<div style="text-align:center; font-size:500%">
<strong>FIN</strong>
</div>

</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="8">
<li id="fn8"><p>If you can think of a use case where <code>x&lt;br&gt;y&lt;br&gt;z</code> leading to <code>xyz</code> would be both expected as default behavior and desired please let me know.<a href="shakespeare-start-to-finish.html#fnref8">↩</a></p></li>
<li id="fn9"><p>If this surprises you, let me remind you that there are over 10k packages on CRAN alone.<a href="shakespeare-start-to-finish.html#fnref9">↩</a></p></li>
<li id="fn10"><p>I found it easier to work with the entire data frame for the function, hence splitting it on id and recombining. Some attempt was made to work within the tidyverse, but there were numerous issues to what should have been a fairly easy task.<a href="shakespeare-start-to-finish.html#fnref10">↩</a></p></li>
<li id="fn11"><p>Love might as well be a stopword for Shakespeare.<a href="shakespeare-start-to-finish.html#fnref11">↩</a></p></li>
<li id="fn12"><p>I don’t show this as I actually did it in parallel due to longer works taking a notable time to calculate MTLD.<a href="shakespeare-start-to-finish.html#fnref12">↩</a></p></li>
<li id="fn13"><p>The Pearson correlation between MTLD and the Coleman Liau grade readability depicted previously was .87.<a href="shakespeare-start-to-finish.html#fnref13">↩</a></p></li>
<li id="fn14"><p>These descriptions are from Sievert and Shirley 2014.<a href="shakespeare-start-to-finish.html#fnref14">↩</a></p></li>
<li id="fn15"><p>If you are actually interested in clustering the documents (or anything for that matter in my opinion), this would not be the way to do so. For one, the documents are already clustered based on most probable topic. Second, cosine distance isn’t actually a proper distance. Third, as shocking as it may seem, newer methods have been developed since the hierarchical clustering approach, which basically has a dozen arbitrary choices to be made at each step. However, as a simple means to a visualization, the method is valuable if it helps with understanding the data.<a href="shakespeare-start-to-finish.html#fnref15">↩</a></p></li>
<li id="fn16"><p>There isn’t a lot to work with in the realm of choosing an ‘optimal’ number of topics, but I investigated it via a measure called <span class="emph">perplexity</span>. It bottomed out at around 50 topics. Usually such an approach is done through cross-validation. However, the solution chosen has no guarantee to produce human interpretable topics.<a href="shakespeare-start-to-finish.html#fnref16">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="summary.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "subsection"
},
"highlight": "pygments",
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
